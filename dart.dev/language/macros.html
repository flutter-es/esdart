<!doctype html><html lang="en">
<!-- Mirrored from dart.dev/language/macros by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Dec 2024 22:19:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="../../www.googletagmanager.com/gtm4a44.js?id=GTM-5VSZM5J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><meta name="description" content="Learn about the experimental macros feature as it develops."><title>Macros (experimental) | Dart</title><link rel="icon" sizes="64x64" href="../assets/img/logo/dart-64.png" eleventy:ignore><link href="../assets/img/touch-icon-iphone.png" rel="apple-touch-icon" eleventy:ignore><link href="../assets/img/touch-icon-ipad.png" rel="apple-touch-icon" sizes="152x152" eleventy:ignore><link href="../assets/img/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="180x180" eleventy:ignore><link href="../assets/img/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="167x167" eleventy:ignore><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dart_lang"><meta name="twitter:title" content="Macros (experimental)"><meta name="twitter:description" content="Learn about the experimental macros feature as it develops."><meta property="og:title" content="Macros (experimental)"><meta property="og:description" content="Learn about the experimental macros feature as it develops."><meta property="og:url" content="/language/macros/"><meta property="og:image" content="/assets/img/logo/dart-logo-for-shares.png?2" eleventy:ignore><link rel="preconnect" href="https://fonts.googleapis.com/"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Display:wght@400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet"><link rel="stylesheet" href="../assets/css/main.css"><script src="../../cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../../cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../../cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.5/js.cookie.min.js" integrity="sha512-nlp9/l96/EpjYBx7EP7pGASVXNe80hGhYAUrjeXnu/fyF5Py0/RXav4BBNs7n5Hx1WFhOEOWSAVjGeC3oKxDVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../assets/js/os-tabs.js"></script><script src="../assets/js/utilities.js"></script><script src="../assets/js/main.js"></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="../../www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-26406144-4","auto"),ga("send","pageview")</script></head><body class="default.html show_banner"><a id="skip" href="#site-content-title">Skip to main content</a><section id="cookie-notice"><div class="container"><p>dart.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic. <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener">Learn more</a>.</p><button id="cookie-consent" class="btn btn-primary">OK, got it</button></div></section><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5VSZM5J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header id="page-header" class="site-header"><nav id="mainnav" class="site-header"><div id="menu-toggle"><i class="material-symbols">menu</i></div><a href="../index.html" class="brand" title="Dart"><img src="../assets/img/logo/logo-white-text.svg" alt="Dart"></a><ul class="navbar"><li><a href="../overview.html" class="nav-link">Overview</a></li><li class="mainnav__get-started"><a href="../guides.html" class="nav-link active"><span>Docs</span></a></li><li><a href="../community.html" class="nav-link">Community</a></li><li><a href="../index.html#try-dart" class="nav-link">Try Dart</a></li><li><a href="../get-dart.html" class="nav-link">Get Dart</a></li><li class="searchfield"><form action="https://dart.dev/search" class="site-header__search form-inline" id="cse-search-box"><input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i"> <input type="hidden" name="ie" value="UTF-8"> <input type="hidden" name="hl" value="en"> <input class="site-header__searchfield form-control search-field" type="search" name="q" id="search-main" autocomplete="off" placeholder="Search" aria-label="Search"></form></li></ul></nav></header><div class="banner"><p class="banner__text">Dart 3.6 is here! Read the <a href="https://medium.com/dartlang/announcing-dart-3-6-778dd7a80983" target="_blank">blog post</a> to learn about new features in pub and the language.</p></div><div id="sidenav"><form action="https://dart.dev/search/" class="site-header__search form-inline"><input class="site-header__searchfield form-control search-field" type="search" name="q" id="search-side" autocomplete="off" placeholder="Search" aria-label="Search"></form><div class="site-sidebar"><ul class="navbar-nav"><li class="nav-item"><a href="../overview.html" class="nav-link">Overview</a></li><li class="nav-item"><a href="../community.html" class="nav-link">Community</a></li><li class="nav-item"><a href="https://dartpad.dev/" class="nav-link">Try Dart</a></li><li class="nav-item"><a href="../get-dart.html" class="nav-link">Get Dart</a></li><li class="nav-item"><a href="../guides.html" class="nav-link">Docs</a></li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li></ul><ul class="nav flex-column"><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-1" role="button" aria-expanded="false" aria-controls="sidenav-1">Language</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1"><li class="nav-item"><a class="nav-link" href="../language.html">Introduction</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-2" href="#sidenav-1-2" role="button" aria-expanded="false" aria-controls="sidenav-1-2">Syntax basics</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-2"><li class="nav-item"><a class="nav-link" href="variables.html">Variables</a></li><li class="nav-item"><a class="nav-link" href="operators.html">Operators</a></li><li class="nav-item"><a class="nav-link" href="comments.html">Comments</a></li><li class="nav-item"><a class="nav-link" href="metadata.html">Metadata</a></li><li class="nav-item"><a class="nav-link" href="libraries.html">Libraries & imports</a></li><li class="nav-item"><a class="nav-link" href="keywords.html">Keywords</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-3" href="#sidenav-1-3" role="button" aria-expanded="false" aria-controls="sidenav-1-3">Types</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-3"><li class="nav-item"><a class="nav-link" href="built-in-types.html">Built-in types</a></li><li class="nav-item"><a class="nav-link" href="records.html">Records</a></li><li class="nav-item"><a class="nav-link" href="collections.html">Collections</a></li><li class="nav-item"><a class="nav-link" href="generics.html">Generics</a></li><li class="nav-item"><a class="nav-link" href="typedefs.html">Typedefs</a></li><li class="nav-item"><a class="nav-link" href="type-system.html">Type system</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-4" href="#sidenav-1-4" role="button" aria-expanded="false" aria-controls="sidenav-1-4">Patterns</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-4"><li class="nav-item"><a class="nav-link" href="patterns.html">Overview & usage</a></li><li class="nav-item"><a class="nav-link" href="pattern-types.html">Pattern types</a></li><li class="nav-item"><a class="nav-link" href="https://codelabs.developers.google.com/codelabs/dart-patterns-records" target="_blank" rel="noopener">Applied tutorial</a></li></ul></li><li class="nav-item"><a class="nav-link" href="functions.html">Functions</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-6" href="#sidenav-1-6" role="button" aria-expanded="false" aria-controls="sidenav-1-6">Control flow</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-6"><li class="nav-item"><a class="nav-link" href="loops.html">Loops</a></li><li class="nav-item"><a class="nav-link" href="branches.html">Branches</a></li><li class="nav-item"><a class="nav-link" href="error-handling.html">Error handling</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-7" href="#sidenav-1-7" role="button" aria-expanded="false" aria-controls="sidenav-1-7">Classes & objects</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-7"><li class="nav-item"><a class="nav-link" href="classes.html">Classes</a></li><li class="nav-item"><a class="nav-link" href="constructors.html">Constructors</a></li><li class="nav-item"><a class="nav-link" href="methods.html">Methods</a></li><li class="nav-item"><a class="nav-link" href="extend.html">Extend a class</a></li><li class="nav-item"><a class="nav-link" href="mixins.html">Mixins</a></li><li class="nav-item"><a class="nav-link" href="enums.html">Enums</a></li><li class="nav-item"><a class="nav-link" href="extension-methods.html">Extension methods</a></li><li class="nav-item"><a class="nav-link" href="extension-types.html">Extension types</a></li><li class="nav-item"><a class="nav-link" href="callable-objects.html">Callable objects</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-8" href="#sidenav-1-8" role="button" aria-expanded="false" aria-controls="sidenav-1-8">Class modifiers</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-8"><li class="nav-item"><a class="nav-link" href="class-modifiers.html">Overview & usage</a></li><li class="nav-item"><a class="nav-link" href="class-modifiers-for-apis.html">Class modifiers for API maintainers</a></li><li class="nav-item"><a class="nav-link" href="modifier-reference.html">Reference</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-9" href="#sidenav-1-9" role="button" aria-expanded="false" aria-controls="sidenav-1-9">Concurrency</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-9"><li class="nav-item"><a class="nav-link" href="concurrency.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="async.html">Asynchronous support</a></li><li class="nav-item"><a class="nav-link" href="isolates.html">Isolates</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-10" href="#sidenav-1-10" role="button" aria-expanded="false" aria-controls="sidenav-1-10">Null safety</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-10"><li class="nav-item"><a class="nav-link" href="../null-safety.html">Sound null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/migration-guide.html">Migrating to null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/understanding-null-safety.html">Understanding null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/unsound-null-safety.html">Unsound null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/faq.html">FAQ</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-2" role="button" aria-expanded="false" aria-controls="sidenav-2">Core libraries</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-2"><li class="nav-item"><a class="nav-link" href="../libraries.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-core.html">dart:core</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-async.html">dart:async</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-math.html">dart:math</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-convert.html">dart:convert</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-io.html">dart:io</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-html.html">dart:html</a></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../libraries/collections/iterables.html">Iterable collections</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-2-10" href="#sidenav-2-10" role="button" aria-expanded="false" aria-controls="sidenav-2-10">Asynchronous programming</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-2-10"><li class="nav-item"><a class="nav-link" href="../libraries/async/async-await.html">Tutorial</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/futures-error-handling.html">Futures and error handling</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/using-streams.html">Using streams</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/creating-streams.html">Creating streams</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-3" role="button" aria-expanded="false" aria-controls="sidenav-3">Effective Dart</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-3"><li class="nav-item"><a class="nav-link" href="../effective-dart.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../effective-dart/style.html">Style</a></li><li class="nav-item"><a class="nav-link" href="../effective-dart/documentation.html">Documentation</a></li><li class="nav-item"><a class="nav-link" href="../effective-dart/usage.html">Usage</a></li><li class="nav-item"><a class="nav-link" href="../effective-dart/design.html">Design</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-4" role="button" aria-expanded="false" aria-controls="sidenav-4">Packages</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-4"><li class="nav-item"><a class="nav-link" href="../tools/pub/packages.html">How to use packages</a></li><li class="nav-item"><a class="nav-link" href="../resources/useful-packages.html">Commonly used packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/create-packages.html">Creating packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/publishing.html">Publishing packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/writing-package-pages.html">Writing package pages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/workspaces.html">Workspaces (monorepo support)</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-4-7" href="#sidenav-4-7" role="button" aria-expanded="false" aria-controls="sidenav-4-7">Package reference</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-4-7"><li class="nav-item"><a class="nav-link" href="../tools/pub/dependencies.html">Dependencies</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/glossary.html">Glossary</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/package-layout.html">Package layout conventions</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/environment-variables.html">Pub environment variables</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/pubspec.html">Pubspec file</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/troubleshoot.html">Troubleshooting pub</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/verified-publishers.html">Verified publishers</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/security-advisories.html">Security advisories</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/versioning.html">Versioning</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/custom-package-repositories.html">Custom package repositories</a></li></ul></li><li class="nav-item"><a class="nav-link" href="../tools/pub/private-files.html">What not to commit</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-5" role="button" aria-expanded="false" aria-controls="sidenav-5">Development</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5"><li class="nav-item"><a class="nav-link" href="../guides/json.html">JSON</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/number-representation.html">Number representation</a></li><li class="nav-item"><a class="nav-link" href="../resources/google-apis.html">Google APIs</a></li><li class="nav-item"><a class="nav-link" href="../multiplatform-apps.html">Multi-platform apps</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-5-5" href="#sidenav-5-5" role="button" aria-expanded="false" aria-controls="sidenav-5-5">Command-line & server apps</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5-5"><li class="nav-item"><a class="nav-link" href="../server.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/get-started.html">Get started</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/cmdline.html">Write command-line apps</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/fetch-data.html">Fetch data from the internet</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/httpserver.html">Write HTTP servers</a></li><li class="nav-item"><a class="nav-link" href="../server/libraries.html">Libraries & packages</a></li><li class="nav-item"><a class="nav-link" href="../server/google-cloud.html">Google Cloud</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-5-6" href="#sidenav-5-6" role="button" aria-expanded="false" aria-controls="sidenav-5-6">Web apps</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5-6"><li class="nav-item"><a class="nav-link" href="../web.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../web/get-started.html">Get started</a></li><li class="nav-item"><a class="nav-link" href="../web/deployment.html">Deployment</a></li><li class="nav-item"><a class="nav-link" href="../web/libraries.html">Libraries & packages</a></li><li class="nav-item"><a class="nav-link" href="../web/wasm.html">Wasm compilation</a></li></ul></li><li class="nav-item"><a class="nav-link" href="../guides/environment-declarations.html">Environment declarations</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-6" role="button" aria-expanded="false" aria-controls="sidenav-6">Interoperability</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-6"><li class="nav-item"><a class="nav-link" href="../interop/c-interop.html">C interop</a></li><li class="nav-item"><a class="nav-link" href="../interop/objective-c-interop.html">Objective-C & Swift interop</a></li><li class="nav-item"><a class="nav-link" href="../interop/java-interop.html">Java & Kotlin interop</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-6-4" href="#sidenav-6-4" role="button" aria-expanded="false" aria-controls="sidenav-6-4">JavaScript interop</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-6-4"><li class="nav-item"><a class="nav-link" href="../interop/js-interop.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/usage.html">Usage</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/js-types.html">JS types</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/tutorials.html">Tutorials</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/past-js-interop.html">Past JS interop</a></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../interop/js-interop/package-web.html">Web interop</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-7" role="button" aria-expanded="false" aria-controls="sidenav-7">Tools & techniques</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7"><li class="nav-item"><a class="nav-link" href="../tools.html">Overview</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-2" href="#sidenav-7-2" role="button" aria-expanded="false" aria-controls="sidenav-7-2">Editors & debuggers</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-2"><li class="nav-item"><a class="nav-link" href="../tools/jetbrains-plugin.html">IntelliJ & Android Studio</a></li><li class="nav-item"><a class="nav-link" href="../tools/vs-code.html">VS Code</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-devtools.html">Dart DevTools</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-2-4" href="#sidenav-7-2-4" role="button" aria-expanded="false" aria-controls="sidenav-7-2-4">DartPad</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-2-4"><li class="nav-item"><a class="nav-link" href="../tools/dartpad.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tools/dartpad/troubleshoot.html">Troubleshooting DartPad</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-3" href="#sidenav-7-3" role="button" aria-expanded="false" aria-controls="sidenav-7-3">Command-line tools</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-3"><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" data-target="#sidenav-7-3-1" href="#sidenav-7-3-1" role="button" aria-expanded="true" aria-controls="sidenav-7-3-1">Dart SDK</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7-3-1"><li class="nav-item"><a class="nav-link" href="../tools/sdk.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-tool.html">dart</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-analyze.html">dart analyze</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-compile.html">dart compile</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-create.html">dart create</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-doc.html">dart doc</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-fix.html">dart fix</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-format.html">dart format</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-info.html">dart info</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/cmd.html">dart pub</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-run.html">dart run</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-test.html">dart test</a></li><li class="nav-item"><a class="nav-link" href="../tools/dartaotruntime.html">dartaotruntime</a></li><li class="nav-item"><a class="nav-link" href="../tools/experiment-flags.html">Experiment flags</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" data-target="#sidenav-7-3-2" href="#sidenav-7-3-2" role="button" aria-expanded="true" aria-controls="sidenav-7-3-2">Other command-line tools</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7-3-2"><li class="nav-item"><a class="nav-link" href="../tools/build_runner.html">build_runner</a></li><li class="nav-item"><a class="nav-link" href="../tools/webdev.html">webdev</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-4" href="#sidenav-7-4" role="button" aria-expanded="false" aria-controls="sidenav-7-4">Static analysis</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-4"><li class="nav-item"><a class="nav-link" href="../tools/analysis.html">Customizing static analysis</a></li><li class="nav-item"><a class="nav-link" href="../deprecated/sound-problems.html">Fixing common type problems</a></li><li class="nav-item"><a class="nav-link" href="../tools/non-promotion-reasons.html">Fixing type promotion failures</a></li><li class="nav-item"><a class="nav-link" href="../tools/linter-rules.html">Linter rules</a></li><li class="nav-item"><a class="nav-link" href="../tools/diagnostic-messages.html">Diagnostic messages</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-5" href="#sidenav-7-5" role="button" aria-expanded="false" aria-controls="sidenav-7-5">Testing & optimization</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-5"><li class="nav-item"><a class="nav-link" href="../guides/testing.html">Testing</a></li><li class="nav-item"><a class="nav-link" href="../web/debugging.html">Debugging web apps</a></li></ul></li></ul></li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-9" role="button" aria-expanded="false" aria-controls="sidenav-9">Resources</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-9"><li class="nav-item"><a class="nav-link" href="../resources/dart-cheatsheet.html">Language cheatsheet</a></li><li class="nav-item"><a class="nav-link" href="../resources/breaking-changes.html">Breaking changes</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/evolution.html">Language evolution</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/spec.html">Language specification</a></li><li class="nav-item"><a class="nav-link" href="../resources/dart-3-migration.html">Dart 3 migration guide</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-9-6" href="#sidenav-9-6" role="button" aria-expanded="false" aria-controls="sidenav-9-6">Coming from ...</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-9-6"><li class="nav-item"><a class="nav-link" href="../resources/coming-from/js-to-dart.html">JavaScript to Dart</a></li><li class="nav-item"><a class="nav-link" href="../resources/coming-from/swift-to-dart.html">Swift to Dart</a></li></ul></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../resources/faq.html">FAQ</a></li><li class="nav-item"><a class="nav-link" href="../resources/glossary.html">Glossary</a></li><li class="nav-item"><a class="nav-link" href="../resources/books.html">Books</a></li><li class="nav-item"><a class="nav-link" href="../resources/videos.html">Videos</a></li><li class="nav-item"><a class="nav-link" href="../tutorials.html">Tutorials</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" href="#sidenav-10" role="button" aria-expanded="true" aria-controls="sidenav-10">Related sites</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-10"><li class="nav-item"><a class="nav-link" href="https://api.dart.dev/" target="_blank" rel="noopener">API reference</a></li><li class="nav-item"><a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog</a></li><li class="nav-item"><a class="nav-link" href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad (online editor)</a></li><li class="nav-item"><a class="nav-link" href="https://flutter.dev/" target="_blank" rel="noopener">Flutter</a></li><li class="nav-item"><a class="nav-link" href="https://pub.dev/" target="_blank" rel="noopener">Package site</a></li></ul></li></ul></div></div><main id="page-content"><div id="site-toc--side" class="site-toc"><header class="site-toc__title">Contents</header><ul class="section-nav"><li class="toc-entry nav-item"><a class="nav-link" href="#the-jsoncodable-macro">The JsonCodable macro</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#set-up-the-experiment">Set up the experiment</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#use-the-macro">Use the macro</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#view-the-generated-code">View the generated code</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#trigger-custom-diagnostics">Trigger custom diagnostics</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#the-macros-language-feature">The macros language feature</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#use-cases">Use cases</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#how-macros-work">How macros work</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#timeline">Timeline</a></li></ul></div><article><div class="content"><div id="site-content-title"><h1>Macros (experimental)</h1></div><div id="site-toc--inline" class="site-toc"><header class="site-toc__title">Contents</header><ul class="section-nav"><li class="toc-entry"><a href="#the-jsoncodable-macro">The JsonCodable macro</a><ul><li class="toc-entry"><a href="#set-up-the-experiment">Set up the experiment</a></li><li class="toc-entry"><a href="#use-the-macro">Use the macro</a></li><li class="toc-entry"><a href="#view-the-generated-code">View the generated code</a></li><li class="toc-entry"><a href="#trigger-custom-diagnostics">Trigger custom diagnostics</a></li></ul></li><li class="toc-entry"><a href="#the-macros-language-feature">The macros language feature</a><ul><li class="toc-entry"><a href="#use-cases">Use cases</a></li><li class="toc-entry"><a href="#how-macros-work">How macros work</a></li></ul></li><li class="toc-entry"><a href="#timeline">Timeline</a></li></ul></div><p><a href="https://github.com/dart-lang/language/blob/main/working/macros/feature-specification.md">The Dart macro system</a> is a major new language feature <em><strong>currently under development</strong></em> which adds support for <a href="https://github.com/dart-lang/language/blob/main/working/macros/motivation.md">static meta-programming</a> to the Dart language.</p><p>A Dart macro is a user-definable piece of code that takes in other code as parameters and operates on it in real-time to create, modify, or add declarations.</p><p>You can think about the macro system in two parts: using macros and writing macros. This page covers each (at a high level, as <em><strong>the feature is still in preview</strong></em>) in the following sections:</p><ul><li><p><a href="#the-jsoncodable-macro"><strong>The <code>JsonCodable</code> macro</strong></a>: A ready-made macro you can try out today (behind an experimental flag) that offers a seamless solution to the common issue of tedious JSON serialization and deserialization in Dart.</p></li><li><p><a href="#the-macros-language-feature"><strong>The macros feature in general</strong></a>: Why we're adding macros to Dart, motivating use cases, benefits over existing code gen solutions, and a cursory overview of how writing macros will work in the future once the feature is complete.</p></li></ul><div class="header-wrapper"><h2 id="the-jsoncodable-macro">The <code>JsonCodable</code> macro</h2><a class="heading-link" href="#the-jsoncodable-macro" aria-label="Link to 'The JsonCodable macro' section">#</a></div><aside class="alert alert-warning"><div class="alert-header"><i class="material-symbols" aria-hidden="true">error</i> <span>Important</span></div><div class="alert-content"><p>The <code>JsonCodable</code> macro is not stable and currently behind an <a href="../tools/experiment-flags.html">experimental flag</a>. It only works with Dart <code>3.5.0-152</code> or later. This is available from the <a href="../get-dart.html#release-channels">Dart dev channel</a> or from the <a href="https://docs.flutter.dev/release/upgrade#other-channels">Flutter master channel</a>.</p><p>Functionality is subject to change.</p></div></aside><p>The <a href="https://pub.dev/packages/json/versions/0.20.0"><code>JsonCodable</code></a> macro encodes and decodes user-defined Dart classes to JSON maps of type <code>Map&lt;String, Object?&gt;</code>. It generates two members, a <code>toJson</code> serialization method, and a <code>fromJson</code> deserialization constructor.</p><div class="header-wrapper"><h3 id="set-up-the-experiment">Set up the experiment</h3><a class="heading-link" href="#set-up-the-experiment" aria-label="Link to 'Set up the experiment' section">#</a></div><ol><li><p>Switch to the <a href="../get-dart.html#release-channels">Dart dev channel</a> or the <a href="https://docs.flutter.dev/release/upgrade#other-channels">Flutter master channel</a>.</p></li><li><p>Run <code>dart --version</code> and make sure you have Dart version <code>3.5.0-152</code> or later.</p></li><li><p>Edit the <a href="../tools/pub/pubspec.html#sdk-constraints">SDK constraint</a> in your pubspec to require the Dart version: <code>sdk: ^3.5.0-152</code>.</p></li><li><p><a href="../tools/pub/packages.html">Add the package</a> <code>json</code> to <code>dependencies</code>: <code>dart pub add json</code>.</p></li><li><p><a href="../tools/experiment-flags.html#using-experiment-flags-with-the-dart-analyzer-command-line-and-ide">Enable the experiment</a> in your package's <code>analysis_options.yaml</code> file. file at the root of your project:</p><div class="code-block-wrapper language-yaml"><div class="code-block-body"><span class="code-block-language" title="Language yaml">yaml</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">analyzer</span><span style="color:#222222">:</span></span>
<span class="line"><span style="color:#0468D7"> enable-experiment</span><span style="color:#222222">:</span></span>
<span class="line"><span style="color:#222222">   - </span><span style="color:#11796D">macros</span></span></code></pre></div></div></li><li><p>Import the package in the file you plan to use it:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">import</span><span style="color:#11796D"> 'package:json/json.dart'</span><span style="color:#222222">;</span></span></code></pre></div></div></li><li><p>Run your project with the experimental flag:</p><div class="code-block-wrapper language-console"><div class="code-block-body"><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">dart run --enable-experiment=macros bin/my_app.dart</span></span></code></pre></div></div></li></ol><div class="header-wrapper"><h3 id="use-the-macro">Use the macro</h3><a class="heading-link" href="#use-the-macro" aria-label="Link to 'Use the macro' section">#</a></div><p>To use the <code>JsonCodable</code> macro, attach the annotation to the class you want to serialize:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">import</span><span style="color:#11796D"> 'package:json/json.dart'</span><span style="color:#222222">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">@JsonCodable</span><span style="color:#222222">() </span><span style="color:#6E6E70">// Macro annotation.</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> User</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324"> final</span><span style="color:#0468D7"> int</span><span style="color:#222222">? age;</span></span>
<span class="line"><span style="color:#D43324"> final</span><span style="color:#0468D7"> String</span><span style="color:#222222"> name;</span></span>
<span class="line"><span style="color:#D43324"> final</span><span style="color:#0468D7"> String</span><span style="color:#222222"> username;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>The macro introspects the <code>User</code> class and derives the implementations of <code>fromJson</code> and <code>toJson</code> using the <code>User</code> class's fields.</p><p>So, without needing to define them yourself, <code>toJson</code> and <code>fromJson</code> are now available to use on objects of the annotated class:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">void</span><span style="color:#6200EE"> main</span><span style="color:#222222">() {</span></span>
<span class="line"><span style="color:#6E6E70"> // Given some arbitrary JSON:</span></span>
<span class="line"><span style="color:#D43324"> var</span><span style="color:#222222"> userJson = {</span></span>
<span class="line"><span style="color:#11796D">   'age'</span><span style="color:#222222">: </span><span style="color:#11796D">5</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#11796D">   'name'</span><span style="color:#222222">: </span><span style="color:#11796D">'Roger'</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#11796D">   'username'</span><span style="color:#222222">: </span><span style="color:#11796D">'roger1337'</span></span>
<span class="line"><span style="color:#222222"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70"> // Use the generated members:</span></span>
<span class="line"><span style="color:#D43324"> var</span><span style="color:#222222"> user = </span><span style="color:#0468D7">User</span><span style="color:#222222">.</span><span style="color:#6200EE">fromJson</span><span style="color:#222222">(userJson);</span></span>
<span class="line"><span style="color:#6200EE"> print</span><span style="color:#222222">(user);</span></span>
<span class="line"><span style="color:#6200EE"> print</span><span style="color:#222222">(user.</span><span style="color:#6200EE">toJson</span><span style="color:#222222">());</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="view-the-generated-code">View the generated code</h3><a class="heading-link" href="#view-the-generated-code" aria-label="Link to 'View the generated code' section">#</a></div><p>Sometimes it can be useful to view the generated code to better understand how a macros works, or to inspect the details of what it offers.</p><p>Click on the &quot;<strong>Go to Augmentation</strong>&quot; link that appears under the annotation in your IDE (supported in VSCode) to see how the macro generates <code>toJson</code> and <code>fromJson</code>.</p><p>If you change anything in the annotated class, you can watch the generated augmentation adjust in real time alongside your application code:</p><p><img src="../assets/img/language/macro-augmentation.gif" alt="A side-by-side gif of the generated augmentation updating as the code it's augmenting is updated"></p><div class="header-wrapper"><h3 id="trigger-custom-diagnostics">Trigger custom diagnostics</h3><a class="heading-link" href="#trigger-custom-diagnostics" aria-label="Link to 'Trigger custom diagnostics' section">#</a></div><p>The <code>JsonCodable</code> macro has built-in diagnostics that are emitted just like diagnostics from the language itself. For example, if you try to manually declare a <code>toJson</code> method where the macro is applied, the analyzer will emit the error:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">@JsonCodable</span><span style="color:#222222">()</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> HasToJson</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324"> void</span><span style="color:#6200EE"> </span><mark class="highlight"><span style="color:#6200EE">toJson</span></mark><span style="color:#222222">() {}</span></span>
<span class="line"><span style="color:#6E6E70"> // Error: Cannot generate a toJson method due to this existing one.</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>You can search &quot;<code>DiagnosticMessage</code>&quot; in the <a href="https://github.com/dart-lang/sdk/blob/master/pkg/json/lib/json.dart">the definition of <code>JsonCodable</code></a> for other errors the macro will throw. For example, extending a class that isn't also serializable, or if field names don't exactly match the key names in the given JSON.</p><aside class="alert alert-info"><div class="alert-header"><i class="material-symbols" aria-hidden="true">info</i> <span>Note</span></div><div class="alert-content"><p>To learn more about using the <code>JsonCodable</code> macro, like supported field types, treatment of null and generics, and more, check out <a href="https://pub.dev/packages/json">the README</a>.</p></div></aside><div class="header-wrapper"><h2 id="the-macros-language-feature">The macros language feature</h2><a class="heading-link" href="#the-macros-language-feature" aria-label="Link to 'The macros language feature' section">#</a></div><p>Dart macros are a <em>static</em> metaprogramming, or code generation, solution. Unlike <em>runtime</em> code generation solutions (like <a href="../tools/build_runner.html">build_runner</a>), macros are fully integrated into the Dart language and executed automatically in the background by Dart tools. This makes macros much more efficient than relying on an secondary tool:</p><ul><li><strong>Nothing extra to run</strong>; macros build in real-time as you write your code.</li><li><strong>No duplicated work</strong> or constant recompiling hurting performance; all the building and code generation happen directly in the compiler, automatically.</li><li><strong>Not written to disk</strong>, so no part files or pointers to generated references; macros directly augment the <em>existing</em> class.</li><li><strong>No confusing/obfuscated testing</strong>; custom diagnostics are emitted like any other message from the analyzer, directly in the IDE.</li></ul><p>And also far more efficient, and far less error prone, than manually writing solutions to these types of problems yourself.</p><div class="header-wrapper"><h3 id="use-cases">Use cases</h3><a class="heading-link" href="#use-cases" aria-label="Link to 'Use cases' section">#</a></div><p>Macros provide reusable mechanisms to address patterns characterized by tedious boilerplate, and often times the need to iterate over the fields of a class. Some common examples that we hope to solve with macros in the future are:</p><ul><li><p><strong>Json serialization.</strong> The extra tooling required to serialize JSON, like the <a href="https://pub.dev/packages/json_serializable">json_serializable</a> package, isn't as efficient as it should be. The <code>JsonCodable</code> macro provides a much cleaner way to generate serialization code; <a href="#the-jsoncodable-macro">try it today</a>.</p></li><li><p><strong>Data classes.</strong> Dart's <a href="https://github.com/dart-lang/language/issues/314">most requested</a> feature is for data classes that automatically provide a constructor, and implementations of the <code>==</code>, <code>hashCode</code>, and <code>copyWith()</code> methods for each field. Implementing the solution with macros would mean users can customize the their data classes however they see fit.</p></li><li><p><strong>Verbose Flutter patterns.</strong> One example is breaking down a complex <code>build</code> method into an aggregation of smaller widget classes. It's better for performance and makes the code more maintainable. Unfortunately, writing all those smaller classes requires tons of boilerplate, which discourages users. Macros could potentially provide a solution that iterates over a complex <code>build</code> method to generates smaller widget classes, greatly improving productivity and quality of Flutter code. You can check out one exploration into this topic in this <a href="https://docs.flutter.dev/go/stateful-macro">proposal</a> from the Flutter team.</p></li></ul><div class="header-wrapper"><h3 id="how-macros-work">How macros work</h3><a class="heading-link" href="#how-macros-work" aria-label="Link to 'How macros work' section">#</a></div><aside class="alert alert-warning"><div class="alert-header"><i class="material-symbols" aria-hidden="true">error</i> <span>Important</span></div><div class="alert-content"><p>The macros language feature is not stable and currently behind an <a href="../tools/experiment-flags.html">experimental flag</a>. Functionality is highly subject to change. This section will remain very high-level until stable.</p></div></aside><p>To create a macro, you write a macro declaration similar to a class, using the <code>macro</code> keyword. A macro declaration must also include an <code>implements</code> clause to define which interface the macro can be applied to.</p><p>For example, a macro that is applicable to classes, and adds new declarations to the class, would implement the <code>ClassDeclarationsMacro</code> interface:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">macro</span><span style="color:#D43324"> class</span><span style="color:#0468D7"> MyMacro</span><span style="color:#D43324"> implements</span><span style="color:#0468D7"> ClassDeclarationsMacro</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">   const</span><span style="color:#0468D7"> MyMacro</span><span style="color:#222222">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">   // ...</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>While the feature is still in development, you can find the full list of macro interfaces <a href="https://github.com/dart-lang/sdk/blob/main/pkg/_macros/lib/src/api/macros.dart">in the source code</a>.</p><p>The <code>MyMacro</code> constructor in the above example corresponds to the annotation you would use to apply the macro to a declaration. The syntax is the same as Dart's existing metadata annotation syntax:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">@MyMacro</span><span style="color:#222222">()</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> A</span><span style="color:#222222"> {}</span></span></code></pre></div></div><p>Within the body of the macro declaration is where you define the code you want the macro to <a href="#view-the-generated-code">generate</a>, as well as any <a href="#trigger-custom-diagnostics">diagnostics</a> you want the macro to emit.</p><p>At a very high-level, writing macros essentially works by using builder methods to piece together the <em>properties</em> of a declaration with <em>identifiers</em> on those properties. The macro gathers this information through deep <a href="https://github.com/dart-lang/language/blob/main/working/macros/feature-specification.md#introspection">introspection</a> of the program.</p><p>Macros are still under development, so that's as much detail we can go into for now. If you're curious, or would like to try it yourself behind an experimental flag, the best guidance is to take a look at the implementation of existing macros:</p><ul><li>Check out the <a href="https://github.com/dart-lang/sdk/blob/master/pkg/json/lib/json.dart">definition</a> of the <code>JsonCodable</code> macro,</li><li>Or any of the <a href="https://github.com/dart-lang/language/tree/main/working/macros/example">examples</a> available in the language repo.</li></ul><div class="header-wrapper"><h2 id="timeline">Timeline</h2><a class="heading-link" href="#timeline" aria-label="Link to 'Timeline' section">#</a></div><p>The stable release date for macros is currently unknown. This is due to the complexity of their implementation.</p><p>Macros work by deeply <a href="https://github.com/dart-lang/language/blob/main/working/macros/feature-specification.md#introspection">introspecting</a> the program in which they're applied. A macro may end up traversing distant parts of the program to gather necessary information on properties and type annotations for the declaration it's augmenting.</p><p>Considering their application in large code bases, where multiple macros can introspect and augment the base continuously in different places, the design of <a href="https://github.com/dart-lang/language/blob/main/working/macros/feature-specification.md#ordering-in-metaprogramming">ordering</a> and <a href="https://github.com/dart-lang/language/blob/main/working/macros/feature-specification.md#phases">phases</a> of execution is especially challenging and requires careful consideration.</p><p>We are working towards a stable release of the <a href="https://pub.dev/packages/json/versions/0.20.0"><code>JsonCodable</code></a> macro later this year (2024), and a stable release of the full language feature (namely, writing your own macros) early next year (2025).</p><p id="page-github-links"><span>Unless stated otherwise, the documentation on this site reflects Dart 3.6.0. Page last updated on 2024-11-18.</span> <a href="https://github.com/dart-lang/site-www/tree/main/src/content/language/macros.md" target="_blank" rel="noopener">View source</a> <span>or </span><a href="https://github.com/dart-lang/site-www/issues/new?template=1_page_issue.yml&amp;page-url=https://dart.dev/language/macros/&amp;page-source=https://github.com/dart-lang/site-www/tree/main/src/content/language/macros.md" title="Report an issue with this page" target="_blank" rel="noopener">report an issue</a>.</p></div></article></main><footer id="page-footer"><div class="footer-section footer-main"><a href="../index.html" class="brand" title="Dart"><img src="../assets/img/logo/logo-white-text.svg" alt="Dart" width="164"></a><div class="footer-social-links"><a href="https://medium.com/dartlang" target="_blank" rel="noopener" title="Medium blog"><svg><use href="../assets/img/social/medium.svg#medium"></use></svg> </a><a href="https://github.com/dart-lang" target="_blank" rel="noopener" title="GitHub"><svg><use href="../assets/img/social/github.svg#github"></use></svg> </a><a href="https://twitter.com/dart_lang" target="_blank" rel="noopener" title="X (Twitter)"><svg><use href="../assets/img/social/x.svg#x"></use></svg></a></div></div><div class="footer-section footer-tray"><div class="footer-licenses">Except as otherwise noted, this site is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, and code samples are licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause">3-Clause BSD License</a>.</div><div class="footer-utility-links"><ul><li><a href="../terms.html" title="Terms of use">Terms</a></li><li><a href="https://policies.google.com/privacy" target="_blank" rel="noopener" title="Privacy policy">Privacy</a></li><li><a href="../security.html" title="Security philosophy and practices">Security</a></li></ul></div></div></footer></body>
<!-- Mirrored from dart.dev/language/macros by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Dec 2024 22:19:55 GMT -->
</html>