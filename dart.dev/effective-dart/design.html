<!doctype html><html lang="en">
<!-- Mirrored from dart.dev/effective-dart/design by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Dec 2024 22:14:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="../../www.googletagmanager.com/gtm4a44.js?id=GTM-5VSZM5J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><meta name="description" content="Design consistent, usable libraries."><title>Effective Dart: Design | Dart</title><link rel="icon" sizes="64x64" href="../assets/img/logo/dart-64.png" eleventy:ignore><link href="../assets/img/touch-icon-iphone.png" rel="apple-touch-icon" eleventy:ignore><link href="../assets/img/touch-icon-ipad.png" rel="apple-touch-icon" sizes="152x152" eleventy:ignore><link href="../assets/img/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="180x180" eleventy:ignore><link href="../assets/img/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="167x167" eleventy:ignore><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dart_lang"><meta name="twitter:title" content="Effective Dart: Design"><meta name="twitter:description" content="Design consistent, usable libraries."><meta property="og:title" content="Effective Dart: Design"><meta property="og:description" content="Design consistent, usable libraries."><meta property="og:url" content="/effective-dart/design/"><meta property="og:image" content="/assets/img/logo/dart-logo-for-shares.png?2" eleventy:ignore><link rel="preconnect" href="https://fonts.googleapis.com/"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Display:wght@400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@400;500;700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet"><link rel="stylesheet" href="../assets/css/main.css"><script src="../../cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../../cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../../cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.5/js.cookie.min.js" integrity="sha512-nlp9/l96/EpjYBx7EP7pGASVXNe80hGhYAUrjeXnu/fyF5Py0/RXav4BBNs7n5Hx1WFhOEOWSAVjGeC3oKxDVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="../assets/js/os-tabs.js"></script><script src="../assets/js/utilities.js"></script><script src="../assets/js/main.js"></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="../../www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-26406144-4","auto"),ga("send","pageview")</script></head><body class="default.html show_banner"><a id="skip" href="#site-content-title">Skip to main content</a><section id="cookie-notice"><div class="container"><p>dart.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic. <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener">Learn more</a>.</p><button id="cookie-consent" class="btn btn-primary">OK, got it</button></div></section><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5VSZM5J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header id="page-header" class="site-header"><nav id="mainnav" class="site-header"><div id="menu-toggle"><i class="material-symbols">menu</i></div><a href="../index.html" class="brand" title="Dart"><img src="../assets/img/logo/logo-white-text.svg" alt="Dart"></a><ul class="navbar"><li><a href="../overview.html" class="nav-link">Overview</a></li><li class="mainnav__get-started"><a href="../guides.html" class="nav-link active"><span>Docs</span></a></li><li><a href="../community.html" class="nav-link">Community</a></li><li><a href="../index.html#try-dart" class="nav-link">Try Dart</a></li><li><a href="../get-dart.html" class="nav-link">Get Dart</a></li><li class="searchfield"><form action="https://dart.dev/search" class="site-header__search form-inline" id="cse-search-box"><input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i"> <input type="hidden" name="ie" value="UTF-8"> <input type="hidden" name="hl" value="en"> <input class="site-header__searchfield form-control search-field" type="search" name="q" id="search-main" autocomplete="off" placeholder="Search" aria-label="Search"></form></li></ul></nav></header><div class="banner"><p class="banner__text">Dart 3.6 is here! Read the <a href="https://medium.com/dartlang/announcing-dart-3-6-778dd7a80983" target="_blank">blog post</a> to learn about new features in pub and the language.</p></div><div id="sidenav"><form action="https://dart.dev/search/" class="site-header__search form-inline"><input class="site-header__searchfield form-control search-field" type="search" name="q" id="search-side" autocomplete="off" placeholder="Search" aria-label="Search"></form><div class="site-sidebar"><ul class="navbar-nav"><li class="nav-item"><a href="../overview.html" class="nav-link">Overview</a></li><li class="nav-item"><a href="../community.html" class="nav-link">Community</a></li><li class="nav-item"><a href="https://dartpad.dev/" class="nav-link">Try Dart</a></li><li class="nav-item"><a href="../get-dart.html" class="nav-link">Get Dart</a></li><li class="nav-item"><a href="../guides.html" class="nav-link">Docs</a></li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li></ul><ul class="nav flex-column"><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-1" role="button" aria-expanded="false" aria-controls="sidenav-1">Language</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1"><li class="nav-item"><a class="nav-link" href="../language.html">Introduction</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-2" href="#sidenav-1-2" role="button" aria-expanded="false" aria-controls="sidenav-1-2">Syntax basics</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-2"><li class="nav-item"><a class="nav-link" href="../language/variables.html">Variables</a></li><li class="nav-item"><a class="nav-link" href="../language/operators.html">Operators</a></li><li class="nav-item"><a class="nav-link" href="../language/comments.html">Comments</a></li><li class="nav-item"><a class="nav-link" href="../language/metadata.html">Metadata</a></li><li class="nav-item"><a class="nav-link" href="../language/libraries.html">Libraries & imports</a></li><li class="nav-item"><a class="nav-link" href="../language/keywords.html">Keywords</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-3" href="#sidenav-1-3" role="button" aria-expanded="false" aria-controls="sidenav-1-3">Types</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-3"><li class="nav-item"><a class="nav-link" href="../language/built-in-types.html">Built-in types</a></li><li class="nav-item"><a class="nav-link" href="../language/records.html">Records</a></li><li class="nav-item"><a class="nav-link" href="../language/collections.html">Collections</a></li><li class="nav-item"><a class="nav-link" href="../language/generics.html">Generics</a></li><li class="nav-item"><a class="nav-link" href="../language/typedefs.html">Typedefs</a></li><li class="nav-item"><a class="nav-link" href="../language/type-system.html">Type system</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-4" href="#sidenav-1-4" role="button" aria-expanded="false" aria-controls="sidenav-1-4">Patterns</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-4"><li class="nav-item"><a class="nav-link" href="../language/patterns.html">Overview & usage</a></li><li class="nav-item"><a class="nav-link" href="../language/pattern-types.html">Pattern types</a></li><li class="nav-item"><a class="nav-link" href="https://codelabs.developers.google.com/codelabs/dart-patterns-records" target="_blank" rel="noopener">Applied tutorial</a></li></ul></li><li class="nav-item"><a class="nav-link" href="../language/functions.html">Functions</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-6" href="#sidenav-1-6" role="button" aria-expanded="false" aria-controls="sidenav-1-6">Control flow</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-6"><li class="nav-item"><a class="nav-link" href="../language/loops.html">Loops</a></li><li class="nav-item"><a class="nav-link" href="../language/branches.html">Branches</a></li><li class="nav-item"><a class="nav-link" href="../language/error-handling.html">Error handling</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-7" href="#sidenav-1-7" role="button" aria-expanded="false" aria-controls="sidenav-1-7">Classes & objects</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-7"><li class="nav-item"><a class="nav-link" href="../language/classes.html">Classes</a></li><li class="nav-item"><a class="nav-link" href="../language/constructors.html">Constructors</a></li><li class="nav-item"><a class="nav-link" href="../language/methods.html">Methods</a></li><li class="nav-item"><a class="nav-link" href="../language/extend.html">Extend a class</a></li><li class="nav-item"><a class="nav-link" href="../language/mixins.html">Mixins</a></li><li class="nav-item"><a class="nav-link" href="../language/enums.html">Enums</a></li><li class="nav-item"><a class="nav-link" href="../language/extension-methods.html">Extension methods</a></li><li class="nav-item"><a class="nav-link" href="../language/extension-types.html">Extension types</a></li><li class="nav-item"><a class="nav-link" href="../language/callable-objects.html">Callable objects</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-8" href="#sidenav-1-8" role="button" aria-expanded="false" aria-controls="sidenav-1-8">Class modifiers</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-8"><li class="nav-item"><a class="nav-link" href="../language/class-modifiers.html">Overview & usage</a></li><li class="nav-item"><a class="nav-link" href="../language/class-modifiers-for-apis.html">Class modifiers for API maintainers</a></li><li class="nav-item"><a class="nav-link" href="../language/modifier-reference.html">Reference</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-9" href="#sidenav-1-9" role="button" aria-expanded="false" aria-controls="sidenav-1-9">Concurrency</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-9"><li class="nav-item"><a class="nav-link" href="../language/concurrency.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../language/async.html">Asynchronous support</a></li><li class="nav-item"><a class="nav-link" href="../language/isolates.html">Isolates</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-1-10" href="#sidenav-1-10" role="button" aria-expanded="false" aria-controls="sidenav-1-10">Null safety</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-1-10"><li class="nav-item"><a class="nav-link" href="../null-safety.html">Sound null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/migration-guide.html">Migrating to null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/understanding-null-safety.html">Understanding null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/unsound-null-safety.html">Unsound null safety</a></li><li class="nav-item"><a class="nav-link" href="../null-safety/faq.html">FAQ</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-2" role="button" aria-expanded="false" aria-controls="sidenav-2">Core libraries</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-2"><li class="nav-item"><a class="nav-link" href="../libraries.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-core.html">dart:core</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-async.html">dart:async</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-math.html">dart:math</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-convert.html">dart:convert</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-io.html">dart:io</a></li><li class="nav-item"><a class="nav-link" href="../libraries/dart-html.html">dart:html</a></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../libraries/collections/iterables.html">Iterable collections</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-2-10" href="#sidenav-2-10" role="button" aria-expanded="false" aria-controls="sidenav-2-10">Asynchronous programming</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-2-10"><li class="nav-item"><a class="nav-link" href="../libraries/async/async-await.html">Tutorial</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/futures-error-handling.html">Futures and error handling</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/using-streams.html">Using streams</a></li><li class="nav-item"><a class="nav-link" href="../libraries/async/creating-streams.html">Creating streams</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link active collapsible" data-toggle="collapse" href="#sidenav-3" role="button" aria-expanded="true" aria-controls="sidenav-3">Effective Dart</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3"><li class="nav-item"><a class="nav-link" href="../effective-dart.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="style.html">Style</a></li><li class="nav-item"><a class="nav-link" href="documentation.html">Documentation</a></li><li class="nav-item"><a class="nav-link" href="usage.html">Usage</a></li><li class="nav-item"><a class="nav-link active" href="design.html">Design</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-4" role="button" aria-expanded="false" aria-controls="sidenav-4">Packages</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-4"><li class="nav-item"><a class="nav-link" href="../tools/pub/packages.html">How to use packages</a></li><li class="nav-item"><a class="nav-link" href="../resources/useful-packages.html">Commonly used packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/create-packages.html">Creating packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/publishing.html">Publishing packages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/writing-package-pages.html">Writing package pages</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/workspaces.html">Workspaces (monorepo support)</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-4-7" href="#sidenav-4-7" role="button" aria-expanded="false" aria-controls="sidenav-4-7">Package reference</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-4-7"><li class="nav-item"><a class="nav-link" href="../tools/pub/dependencies.html">Dependencies</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/glossary.html">Glossary</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/package-layout.html">Package layout conventions</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/environment-variables.html">Pub environment variables</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/pubspec.html">Pubspec file</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/troubleshoot.html">Troubleshooting pub</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/verified-publishers.html">Verified publishers</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/security-advisories.html">Security advisories</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/versioning.html">Versioning</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/custom-package-repositories.html">Custom package repositories</a></li></ul></li><li class="nav-item"><a class="nav-link" href="../tools/pub/private-files.html">What not to commit</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-5" role="button" aria-expanded="false" aria-controls="sidenav-5">Development</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5"><li class="nav-item"><a class="nav-link" href="../guides/json.html">JSON</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/number-representation.html">Number representation</a></li><li class="nav-item"><a class="nav-link" href="../resources/google-apis.html">Google APIs</a></li><li class="nav-item"><a class="nav-link" href="../multiplatform-apps.html">Multi-platform apps</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-5-5" href="#sidenav-5-5" role="button" aria-expanded="false" aria-controls="sidenav-5-5">Command-line & server apps</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5-5"><li class="nav-item"><a class="nav-link" href="../server.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/get-started.html">Get started</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/cmdline.html">Write command-line apps</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/fetch-data.html">Fetch data from the internet</a></li><li class="nav-item"><a class="nav-link" href="../tutorials/server/httpserver.html">Write HTTP servers</a></li><li class="nav-item"><a class="nav-link" href="../server/libraries.html">Libraries & packages</a></li><li class="nav-item"><a class="nav-link" href="../server/google-cloud.html">Google Cloud</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-5-6" href="#sidenav-5-6" role="button" aria-expanded="false" aria-controls="sidenav-5-6">Web apps</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-5-6"><li class="nav-item"><a class="nav-link" href="../web.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../web/get-started.html">Get started</a></li><li class="nav-item"><a class="nav-link" href="../web/deployment.html">Deployment</a></li><li class="nav-item"><a class="nav-link" href="../web/libraries.html">Libraries & packages</a></li><li class="nav-item"><a class="nav-link" href="../web/wasm.html">Wasm compilation</a></li></ul></li><li class="nav-item"><a class="nav-link" href="../guides/environment-declarations.html">Environment declarations</a></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-6" role="button" aria-expanded="false" aria-controls="sidenav-6">Interoperability</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-6"><li class="nav-item"><a class="nav-link" href="../interop/c-interop.html">C interop</a></li><li class="nav-item"><a class="nav-link" href="../interop/objective-c-interop.html">Objective-C & Swift interop</a></li><li class="nav-item"><a class="nav-link" href="../interop/java-interop.html">Java & Kotlin interop</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-6-4" href="#sidenav-6-4" role="button" aria-expanded="false" aria-controls="sidenav-6-4">JavaScript interop</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-6-4"><li class="nav-item"><a class="nav-link" href="../interop/js-interop.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/usage.html">Usage</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/js-types.html">JS types</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/tutorials.html">Tutorials</a></li><li class="nav-item"><a class="nav-link" href="../interop/js-interop/past-js-interop.html">Past JS interop</a></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../interop/js-interop/package-web.html">Web interop</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-7" role="button" aria-expanded="false" aria-controls="sidenav-7">Tools & techniques</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7"><li class="nav-item"><a class="nav-link" href="../tools.html">Overview</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-2" href="#sidenav-7-2" role="button" aria-expanded="false" aria-controls="sidenav-7-2">Editors & debuggers</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-2"><li class="nav-item"><a class="nav-link" href="../tools/jetbrains-plugin.html">IntelliJ & Android Studio</a></li><li class="nav-item"><a class="nav-link" href="../tools/vs-code.html">VS Code</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-devtools.html">Dart DevTools</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-2-4" href="#sidenav-7-2-4" role="button" aria-expanded="false" aria-controls="sidenav-7-2-4">DartPad</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-2-4"><li class="nav-item"><a class="nav-link" href="../tools/dartpad.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tools/dartpad/troubleshoot.html">Troubleshooting DartPad</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-3" href="#sidenav-7-3" role="button" aria-expanded="false" aria-controls="sidenav-7-3">Command-line tools</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-3"><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" data-target="#sidenav-7-3-1" href="#sidenav-7-3-1" role="button" aria-expanded="true" aria-controls="sidenav-7-3-1">Dart SDK</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7-3-1"><li class="nav-item"><a class="nav-link" href="../tools/sdk.html">Overview</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-tool.html">dart</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-analyze.html">dart analyze</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-compile.html">dart compile</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-create.html">dart create</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-doc.html">dart doc</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-fix.html">dart fix</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-format.html">dart format</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-info.html">dart info</a></li><li class="nav-item"><a class="nav-link" href="../tools/pub/cmd.html">dart pub</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-run.html">dart run</a></li><li class="nav-item"><a class="nav-link" href="../tools/dart-test.html">dart test</a></li><li class="nav-item"><a class="nav-link" href="../tools/dartaotruntime.html">dartaotruntime</a></li><li class="nav-item"><a class="nav-link" href="../tools/experiment-flags.html">Experiment flags</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" data-target="#sidenav-7-3-2" href="#sidenav-7-3-2" role="button" aria-expanded="true" aria-controls="sidenav-7-3-2">Other command-line tools</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-7-3-2"><li class="nav-item"><a class="nav-link" href="../tools/build_runner.html">build_runner</a></li><li class="nav-item"><a class="nav-link" href="../tools/webdev.html">webdev</a></li></ul></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-4" href="#sidenav-7-4" role="button" aria-expanded="false" aria-controls="sidenav-7-4">Static analysis</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-4"><li class="nav-item"><a class="nav-link" href="../tools/analysis.html">Customizing static analysis</a></li><li class="nav-item"><a class="nav-link" href="../deprecated/sound-problems.html">Fixing common type problems</a></li><li class="nav-item"><a class="nav-link" href="../tools/non-promotion-reasons.html">Fixing type promotion failures</a></li><li class="nav-item"><a class="nav-link" href="../tools/linter-rules.html">Linter rules</a></li><li class="nav-item"><a class="nav-link" href="../tools/diagnostic-messages.html">Diagnostic messages</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-7-5" href="#sidenav-7-5" role="button" aria-expanded="false" aria-controls="sidenav-7-5">Testing & optimization</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-7-5"><li class="nav-item"><a class="nav-link" href="../guides/testing.html">Testing</a></li><li class="nav-item"><a class="nav-link" href="../web/debugging.html">Debugging web apps</a></li></ul></li></ul></li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li><li class="nav-item"><a class="nav-link collapsed collapsible" data-toggle="collapse" href="#sidenav-9" role="button" aria-expanded="false" aria-controls="sidenav-9">Resources</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-9"><li class="nav-item"><a class="nav-link" href="../resources/dart-cheatsheet.html">Language cheatsheet</a></li><li class="nav-item"><a class="nav-link" href="../resources/breaking-changes.html">Breaking changes</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/evolution.html">Language evolution</a></li><li class="nav-item"><a class="nav-link" href="../resources/language/spec.html">Language specification</a></li><li class="nav-item"><a class="nav-link" href="../resources/dart-3-migration.html">Dart 3 migration guide</a></li><li class="nav-item"><a class="nav-link collapsible collapsed" data-toggle="collapse" data-target="#sidenav-9-6" href="#sidenav-9-6" role="button" aria-expanded="false" aria-controls="sidenav-9-6">Coming from ...</a><ul class="nav flex-column flex-nowrap collapse" id="sidenav-9-6"><li class="nav-item"><a class="nav-link" href="../resources/coming-from/js-to-dart.html">JavaScript to Dart</a></li><li class="nav-item"><a class="nav-link" href="../resources/coming-from/swift-to-dart.html">Swift to Dart</a></li></ul></li><div class="dropdown-divider"></div><li class="nav-item"><a class="nav-link" href="../resources/faq.html">FAQ</a></li><li class="nav-item"><a class="nav-link" href="../resources/glossary.html">Glossary</a></li><li class="nav-item"><a class="nav-link" href="../resources/books.html">Books</a></li><li class="nav-item"><a class="nav-link" href="../resources/videos.html">Videos</a></li><li class="nav-item"><a class="nav-link" href="../tutorials.html">Tutorials</a></li></ul></li><li class="nav-item"><a class="nav-link collapsible" data-toggle="collapse" href="#sidenav-10" role="button" aria-expanded="true" aria-controls="sidenav-10">Related sites</a><ul class="nav flex-column flex-nowrap collapse show" id="sidenav-10"><li class="nav-item"><a class="nav-link" href="https://api.dart.dev/" target="_blank" rel="noopener">API reference</a></li><li class="nav-item"><a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog</a></li><li class="nav-item"><a class="nav-link" href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad (online editor)</a></li><li class="nav-item"><a class="nav-link" href="https://flutter.dev/" target="_blank" rel="noopener">Flutter</a></li><li class="nav-item"><a class="nav-link" href="https://pub.dev/" target="_blank" rel="noopener">Package site</a></li></ul></li></ul></div></div><main id="page-content"><div id="site-toc--side" class="site-toc"><header class="site-toc__title">Contents</header><ul class="section-nav"><li class="toc-entry nav-item"><a class="nav-link" href="#names">Names</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#do-use-terms-consistently">DO use terms consistently</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-abbreviations">AVOID abbreviations</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-putting-the-most-descriptive-noun-last">PREFER putting the most descriptive noun last</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#consider-making-the-code-read-like-a-sentence">CONSIDER making the code read like a sentence</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-a-noun-phrase-for-a-non-boolean-property-or-variable">PREFER a noun phrase for a non-boolean property or variable</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable">PREFER a non-imperative verb phrase for a boolean property or variable</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#consider-omitting-the-verb-for-a-named-boolean-parameter">CONSIDER omitting the verb for a named boolean parameter</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-the-positive-name-for-a-boolean-property-or-variable">PREFER the &quot;positive&quot; name for a boolean property or variable</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect">PREFER an imperative verb phrase for a function or method whose main purpose is a side effect</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose">PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#consider-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs">CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-starting-a-method-name-with-get">AVOID starting a method name with get</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-naming-a-method-to___-if-it-copies-the-objects-state-to-a-new-object">PREFER naming a method to_<wbr>_<wbr>_<wbr>() if it copies the object's state to a new object</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-naming-a-method-as___-if-it-returns-a-different-representation-backed-by-the-original-object">PREFER naming a method as_<wbr>_<wbr>_<wbr>() if it returns a different representation backed by the original object</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-describing-the-parameters-in-the-functions-or-methods-name">AVOID describing the parameters in the function's or method's name</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-follow-existing-mnemonic-conventions-when-naming-type-parameters">DO follow existing mnemonic conventions when naming type parameters</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#libraries">Libraries</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-making-declarations-private">PREFER making declarations private</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#consider-declaring-multiple-classes-in-the-same-library">CONSIDER declaring multiple classes in the same library</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#classes-and-mixins">Classes and mixins</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-defining-a-one-member-abstract-class-when-a-simple-function-will-do">AVOID defining a one-member abstract class when a simple function will do</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-defining-a-class-that-contains-only-static-members">AVOID defining a class that contains only static members</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-extending-a-class-that-isnt-intended-to-be-subclassed">AVOID extending a class that isn't intended to be subclassed</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-document-if-your-class-supports-being-extended">DO document if your class supports being extended</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-implementing-a-class-that-isnt-intended-to-be-an-interface">AVOID implementing a class that isn't intended to be an interface</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-document-if-your-class-supports-being-used-as-an-interface">DO document if your class supports being used as an interface</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-defining-a-pure-mixin-or-pure-class-to-a-mixin-class">PREFER defining a pure mixin or pure class to a mixin class</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#constructors">Constructors</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#consider-making-your-constructor-const-if-the-class-supports-it">CONSIDER making your constructor const if the class supports it</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#members">Members</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-making-fields-and-top-level-variables-final">PREFER making fields and top-level variables final</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-use-getters-for-operations-that-conceptually-access-properties">DO use getters for operations that conceptually access properties</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-use-setters-for-operations-that-conceptually-change-properties">DO use setters for operations that conceptually change properties</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-define-a-setter-without-a-corresponding-getter">DON'T define a setter without a corresponding getter</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-using-runtime-type-tests-to-fake-overloading">AVOID using runtime type tests to fake overloading</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-public-late-final-fields-without-initializers">AVOID public late final fields without initializers</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-returning-nullable-future-stream-and-collection-types">AVOID returning nullable Future, Stream, and collection types</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-returning-this-from-methods-just-to-enable-a-fluent-interface">AVOID returning this from methods just to enable a fluent interface</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#types">Types</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#do-type-annotate-variables-without-initializers">DO type annotate variables without initializers</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-type-annotate-fields-and-top-level-variables-if-the-type-isnt-obvious">DO type annotate fields and top-level variables if the type isn't obvious</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-redundantly-type-annotate-initialized-local-variables">DON'T redundantly type annotate initialized local variables</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-annotate-return-types-on-function-declarations">DO annotate return types on function declarations</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-annotate-parameter-types-on-function-declarations">DO annotate parameter types on function declarations</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-annotate-inferred-parameter-types-on-function-expressions">DON'T annotate inferred parameter types on function expressions</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-type-annotate-initializing-formals">DON'T type annotate initializing formals</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-write-type-arguments-on-generic-invocations-that-arent-inferred">DO write type arguments on generic invocations that aren't inferred</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-write-type-arguments-on-generic-invocations-that-are-inferred">DON'T write type arguments on generic invocations that are inferred</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-writing-incomplete-generic-types">AVOID writing incomplete generic types</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-annotate-with-dynamic-instead-of-letting-inference-fail">DO annotate with dynamic instead of letting inference fail</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-signatures-in-function-type-annotations">PREFER signatures in function type annotations</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-specify-a-return-type-for-a-setter">DON'T specify a return type for a setter</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-use-the-legacy-typedef-syntax">DON'T use the legacy typedef syntax</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-inline-function-types-over-typedefs">PREFER inline function types over typedefs</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#prefer-using-function-type-syntax-for-parameters">PREFER using function type syntax for parameters</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-using-dynamic-unless-you-want-to-disable-static-checking">AVOID using dynamic unless you want to disable static checking</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-use-futurevoid-as-the-return-type-of-asynchronous-members-that-do-not-produce-values">DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-using-futureort-as-a-return-type">AVOID using FutureOr&lt;T&gt; as a return type</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#parameters">Parameters</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-positional-boolean-parameters">AVOID positional boolean parameters</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters">AVOID optional positional parameters if the user may want to omit earlier parameters</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-mandatory-parameters-that-accept-a-special-no-argument-value">AVOID mandatory parameters that accept a special &quot;no argument&quot; value</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range">DO use inclusive start and exclusive end parameters to accept a range</a></li></ul></li><li class="toc-entry nav-item"><a class="nav-link" href="#equality">Equality</a><ul class="nav"><li class="toc-entry nav-item"><a class="nav-link" href="#do-override-hashcode-if-you-override">DO override hashCode if you override ==</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#do-make-your-operator-obey-the-mathematical-rules-of-equality">DO make your == operator obey the mathematical rules of equality</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#avoid-defining-custom-equality-for-mutable-classes">AVOID defining custom equality for mutable classes</a></li><li class="toc-entry nav-item"><a class="nav-link" href="#dont-make-the-parameter-to-nullable">DON'T make the parameter to == nullable</a></li></ul></li></ul></div><article><div class="content"><nav id="subnav"><ul><li class="previous"><a href="usage.html">&lang;&nbsp;&nbsp;Usage</a></li><li class="next"></li></ul></nav><div id="site-content-title"><h1>Effective Dart: Design</h1></div><div id="site-toc--inline" class="site-toc toc-collapsible toc-collapsed"><header class="site-toc__title">Contents <span class="site-toc--inline__toggle toc-toggle-down"><i class="material-symbols">keyboard_arrow_down</i></span> <span class="site-toc--inline__toggle toc-toggle-up"><i class="material-symbols">keyboard_arrow_up</i></span></header><ul class="section-nav"><li class="toc-entry"><a href="#names">Names</a><ul><li class="toc-entry"><a href="#do-use-terms-consistently">DO use terms consistently</a></li><li class="toc-entry"><a href="#avoid-abbreviations">AVOID abbreviations</a></li><li class="toc-entry"><a href="#prefer-putting-the-most-descriptive-noun-last">PREFER putting the most descriptive noun last</a></li><li class="toc-entry"><a href="#consider-making-the-code-read-like-a-sentence">CONSIDER making the code read like a sentence</a></li><li class="toc-entry"><a href="#prefer-a-noun-phrase-for-a-non-boolean-property-or-variable">PREFER a noun phrase for a non-boolean property or variable</a></li><li class="toc-entry"><a href="#prefer-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable">PREFER a non-imperative verb phrase for a boolean property or variable</a></li><li class="toc-entry"><a href="#consider-omitting-the-verb-for-a-named-boolean-parameter">CONSIDER omitting the verb for a named boolean parameter</a></li><li class="toc-entry"><a href="#prefer-the-positive-name-for-a-boolean-property-or-variable">PREFER the &quot;positive&quot; name for a boolean property or variable</a></li><li class="toc-entry"><a href="#prefer-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect">PREFER an imperative verb phrase for a function or method whose main purpose is a side effect</a></li><li class="toc-entry"><a href="#prefer-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose">PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose</a></li><li class="toc-entry"><a href="#consider-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs">CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs</a></li><li class="toc-entry"><a href="#avoid-starting-a-method-name-with-get">AVOID starting a method name with get</a></li><li class="toc-entry"><a href="#prefer-naming-a-method-to___-if-it-copies-the-objects-state-to-a-new-object">PREFER naming a method to___() if it copies the object's state to a new object</a></li><li class="toc-entry"><a href="#prefer-naming-a-method-as___-if-it-returns-a-different-representation-backed-by-the-original-object">PREFER naming a method as___() if it returns a different representation backed by the original object</a></li><li class="toc-entry"><a href="#avoid-describing-the-parameters-in-the-functions-or-methods-name">AVOID describing the parameters in the function's or method's name</a></li><li class="toc-entry"><a href="#do-follow-existing-mnemonic-conventions-when-naming-type-parameters">DO follow existing mnemonic conventions when naming type parameters</a></li></ul></li><li class="toc-entry"><a href="#libraries">Libraries</a><ul><li class="toc-entry"><a href="#prefer-making-declarations-private">PREFER making declarations private</a></li><li class="toc-entry"><a href="#consider-declaring-multiple-classes-in-the-same-library">CONSIDER declaring multiple classes in the same library</a></li></ul></li><li class="toc-entry"><a href="#classes-and-mixins">Classes and mixins</a><ul><li class="toc-entry"><a href="#avoid-defining-a-one-member-abstract-class-when-a-simple-function-will-do">AVOID defining a one-member abstract class when a simple function will do</a></li><li class="toc-entry"><a href="#avoid-defining-a-class-that-contains-only-static-members">AVOID defining a class that contains only static members</a></li><li class="toc-entry"><a href="#avoid-extending-a-class-that-isnt-intended-to-be-subclassed">AVOID extending a class that isn't intended to be subclassed</a></li><li class="toc-entry"><a href="#do-document-if-your-class-supports-being-extended">DO document if your class supports being extended</a></li><li class="toc-entry"><a href="#avoid-implementing-a-class-that-isnt-intended-to-be-an-interface">AVOID implementing a class that isn't intended to be an interface</a></li><li class="toc-entry"><a href="#do-document-if-your-class-supports-being-used-as-an-interface">DO document if your class supports being used as an interface</a></li><li class="toc-entry"><a href="#prefer-defining-a-pure-mixin-or-pure-class-to-a-mixin-class">PREFER defining a pure mixin or pure class to a mixin class</a></li></ul></li><li class="toc-entry"><a href="#constructors">Constructors</a><ul><li class="toc-entry"><a href="#consider-making-your-constructor-const-if-the-class-supports-it">CONSIDER making your constructor const if the class supports it</a></li></ul></li><li class="toc-entry"><a href="#members">Members</a><ul><li class="toc-entry"><a href="#prefer-making-fields-and-top-level-variables-final">PREFER making fields and top-level variables final</a></li><li class="toc-entry"><a href="#do-use-getters-for-operations-that-conceptually-access-properties">DO use getters for operations that conceptually access properties</a></li><li class="toc-entry"><a href="#do-use-setters-for-operations-that-conceptually-change-properties">DO use setters for operations that conceptually change properties</a></li><li class="toc-entry"><a href="#dont-define-a-setter-without-a-corresponding-getter">DON'T define a setter without a corresponding getter</a></li><li class="toc-entry"><a href="#avoid-using-runtime-type-tests-to-fake-overloading">AVOID using runtime type tests to fake overloading</a></li><li class="toc-entry"><a href="#avoid-public-late-final-fields-without-initializers">AVOID public late final fields without initializers</a></li><li class="toc-entry"><a href="#avoid-returning-nullable-future-stream-and-collection-types">AVOID returning nullable Future, Stream, and collection types</a></li><li class="toc-entry"><a href="#avoid-returning-this-from-methods-just-to-enable-a-fluent-interface">AVOID returning this from methods just to enable a fluent interface</a></li></ul></li><li class="toc-entry"><a href="#types">Types</a><ul><li class="toc-entry"><a href="#do-type-annotate-variables-without-initializers">DO type annotate variables without initializers</a></li><li class="toc-entry"><a href="#do-type-annotate-fields-and-top-level-variables-if-the-type-isnt-obvious">DO type annotate fields and top-level variables if the type isn't obvious</a></li><li class="toc-entry"><a href="#dont-redundantly-type-annotate-initialized-local-variables">DON'T redundantly type annotate initialized local variables</a></li><li class="toc-entry"><a href="#do-annotate-return-types-on-function-declarations">DO annotate return types on function declarations</a></li><li class="toc-entry"><a href="#do-annotate-parameter-types-on-function-declarations">DO annotate parameter types on function declarations</a></li><li class="toc-entry"><a href="#dont-annotate-inferred-parameter-types-on-function-expressions">DON'T annotate inferred parameter types on function expressions</a></li><li class="toc-entry"><a href="#dont-type-annotate-initializing-formals">DON'T type annotate initializing formals</a></li><li class="toc-entry"><a href="#do-write-type-arguments-on-generic-invocations-that-arent-inferred">DO write type arguments on generic invocations that aren't inferred</a></li><li class="toc-entry"><a href="#dont-write-type-arguments-on-generic-invocations-that-are-inferred">DON'T write type arguments on generic invocations that are inferred</a></li><li class="toc-entry"><a href="#avoid-writing-incomplete-generic-types">AVOID writing incomplete generic types</a></li><li class="toc-entry"><a href="#do-annotate-with-dynamic-instead-of-letting-inference-fail">DO annotate with dynamic instead of letting inference fail</a></li><li class="toc-entry"><a href="#prefer-signatures-in-function-type-annotations">PREFER signatures in function type annotations</a></li><li class="toc-entry"><a href="#dont-specify-a-return-type-for-a-setter">DON'T specify a return type for a setter</a></li><li class="toc-entry"><a href="#dont-use-the-legacy-typedef-syntax">DON'T use the legacy typedef syntax</a></li><li class="toc-entry"><a href="#prefer-inline-function-types-over-typedefs">PREFER inline function types over typedefs</a></li><li class="toc-entry"><a href="#prefer-using-function-type-syntax-for-parameters">PREFER using function type syntax for parameters</a></li><li class="toc-entry"><a href="#avoid-using-dynamic-unless-you-want-to-disable-static-checking">AVOID using dynamic unless you want to disable static checking</a></li><li class="toc-entry"><a href="#do-use-futurevoid-as-the-return-type-of-asynchronous-members-that-do-not-produce-values">DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values</a></li><li class="toc-entry"><a href="#avoid-using-futureort-as-a-return-type">AVOID using FutureOr&lt;T&gt; as a return type</a></li></ul></li><li class="toc-entry"><a href="#parameters">Parameters</a><ul><li class="toc-entry"><a href="#avoid-positional-boolean-parameters">AVOID positional boolean parameters</a></li><li class="toc-entry"><a href="#avoid-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters">AVOID optional positional parameters if the user may want to omit earlier parameters</a></li><li class="toc-entry"><a href="#avoid-mandatory-parameters-that-accept-a-special-no-argument-value">AVOID mandatory parameters that accept a special &quot;no argument&quot; value</a></li><li class="toc-entry"><a href="#do-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range">DO use inclusive start and exclusive end parameters to accept a range</a></li></ul></li><li class="toc-entry"><a href="#equality">Equality</a><ul><li class="toc-entry"><a href="#do-override-hashcode-if-you-override">DO override hashCode if you override ==</a></li><li class="toc-entry"><a href="#do-make-your-operator-obey-the-mathematical-rules-of-equality">DO make your == operator obey the mathematical rules of equality</a></li><li class="toc-entry"><a href="#avoid-defining-custom-equality-for-mutable-classes">AVOID defining custom equality for mutable classes</a></li><li class="toc-entry"><a href="#dont-make-the-parameter-to-nullable">DON'T make the parameter to == nullable</a></li></ul></li></ul><span class="site-toc--inline__toggle toc-toggle-more-items"><i class="material-symbols">more_horiz</i></span></div> <?code-excerpt replace="/([A-Z]\w*)\d\b/$1/g"?> <?code-excerpt plaster="none"?> <?code-excerpt path-base="misc/lib/effective_dart"?> <p>Here are some guidelines for writing consistent, usable APIs for libraries.</p><div class="header-wrapper"><h2 id="names">Names</h2><a class="heading-link" href="#names" aria-label="Link to 'Names' section">#</a></div><p>Naming is an important part of writing readable, maintainable code. The following best practices can help you achieve that goal.</p><div class="header-wrapper"><h3 id="do-use-terms-consistently">DO use terms consistently</h3><a class="heading-link" href="#do-use-terms-consistently" aria-label="Link to 'DO use terms consistently' section">#</a></div><p>Use the same name for the same thing, throughout your code. If a precedent already exists outside your API that users are likely to know, follow that precedent.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">pageCount         </span><span style="color:#6E6E70">// A field.</span></span>
<span class="line"><span style="color:#6200EE">updatePageCount</span><span style="color:#222222">() </span><span style="color:#6E6E70">// Consistent with pageCount.</span></span>
<span class="line"><span style="color:#6200EE">toSomething</span><span style="color:#222222">()     </span><span style="color:#6E6E70">// Consistent with Iterable's toList().</span></span>
<span class="line"><span style="color:#6200EE">asSomething</span><span style="color:#222222">()     </span><span style="color:#6E6E70">// Consistent with List's asMap().</span></span>
<span class="line"><span style="color:#0468D7">Point</span><span style="color:#6E6E70">             // A familiar concept.</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6200EE">renumberPages</span><span style="color:#222222">()      </span><span style="color:#6E6E70">// Confusingly different from pageCount.</span></span>
<span class="line"><span style="color:#6200EE">convertToSomething</span><span style="color:#222222">() </span><span style="color:#6E6E70">// Inconsistent with toX() precedent.</span></span>
<span class="line"><span style="color:#6200EE">wrappedAsSomething</span><span style="color:#222222">() </span><span style="color:#6E6E70">// Inconsistent with asX() precedent.</span></span>
<span class="line"><span style="color:#0468D7">Cartesian</span><span style="color:#6E6E70">            // Unfamiliar to most users.</span></span></code></pre></div></div><p>The goal is to take advantage of what the user already knows. This includes their knowledge of the problem domain itself, the conventions of the core libraries, and other parts of your own API. By building on top of those, you reduce the amount of new knowledge they have to acquire before they can be productive.</p><div class="header-wrapper"><h3 id="avoid-abbreviations">AVOID abbreviations</h3><a class="heading-link" href="#avoid-abbreviations" aria-label="Link to 'AVOID abbreviations' section">#</a></div><p>Unless the abbreviation is more common than the unabbreviated term, don't abbreviate. If you do abbreviate, <a href="style.html#identifiers">capitalize it correctly</a>.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">pageCount</span></span>
<span class="line"><span style="color:#222222">buildRectangles</span></span>
<span class="line"><span style="color:#0468D7">IOStream</span></span>
<span class="line"><span style="color:#0468D7">HttpRequest</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">numPages    </span><span style="color:#6E6E70">// "Num" is an abbreviation of "number (of)".</span></span>
<span class="line"><span style="color:#222222">buildRects</span></span>
<span class="line"><span style="color:#0468D7">InputOutputStream</span></span>
<span class="line"><span style="color:#0468D7">HypertextTransferProtocolRequest</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="prefer-putting-the-most-descriptive-noun-last">PREFER putting the most descriptive noun last</h3><a class="heading-link" href="#prefer-putting-the-most-descriptive-noun-last" aria-label="Link to 'PREFER putting the most descriptive noun last' section">#</a></div><p>The last word should be the most descriptive of what the thing is. You can prefix it with other words, such as adjectives, to further describe the thing.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">pageCount             </span><span style="color:#6E6E70">// A count (of pages).</span></span>
<span class="line"><span style="color:#0468D7">ConversionSink</span><span style="color:#6E6E70">        // A sink for doing conversions.</span></span>
<span class="line"><span style="color:#0468D7">ChunkedConversionSink</span><span style="color:#6E6E70"> // A ConversionSink that's chunked.</span></span>
<span class="line"><span style="color:#0468D7">CssFontFaceRule</span><span style="color:#6E6E70">       // A rule for font faces in CSS.</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">numPages                  </span><span style="color:#6E6E70">// Not a collection of pages.</span></span>
<span class="line"><span style="color:#0468D7">CanvasRenderingContext2D</span><span style="color:#6E6E70">  // Not a "2D".</span></span>
<span class="line"><span style="color:#0468D7">RuleFontFaceCss</span><span style="color:#6E6E70">           // Not a CSS.</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="consider-making-the-code-read-like-a-sentence">CONSIDER making the code read like a sentence</h3><a class="heading-link" href="#consider-making-the-code-read-like-a-sentence" aria-label="Link to 'CONSIDER making the code read like a sentence' section">#</a></div><p>When in doubt about naming, write some code that uses your API, and try to read it like a sentence.</p> <?code-excerpt "design_good.dart (code-like-prose)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6E6E70">// "If errors is empty..."</span></span>
<span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (errors.isEmpty) ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">// "Hey, subscription, cancel!"</span></span>
<span class="line"><span style="color:#222222">subscription.</span><span style="color:#6200EE">cancel</span><span style="color:#222222">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">// "Get the monsters where the monster has claws."</span></span>
<span class="line"><span style="color:#222222">monsters.</span><span style="color:#6200EE">where</span><span style="color:#222222">((monster) => monster.hasClaws);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (code-like-prose)" replace="/ as bool//g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6E6E70">// Telling errors to empty itself, or asking if it is?</span></span>
<span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (errors.empty) ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">// Toggle what? To what?</span></span>
<span class="line"><span style="color:#222222">subscription.</span><span style="color:#6200EE">toggle</span><span style="color:#222222">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">// Filter the monsters with claws *out* or include *only* those?</span></span>
<span class="line"><span style="color:#222222">monsters.</span><span style="color:#6200EE">filter</span><span style="color:#222222">((monster) => monster.hasClaws);</span></span></code></pre></div></div><p>It's helpful to try out your API and see how it &quot;reads&quot; when used in code, but you can go too far. It's not helpful to add articles and other parts of speech to force your names to <em>literally</em> read like a grammatically correct sentence.</p> <?code-excerpt "design_bad.dart (code-like-prose-overdone)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (theCollectionOfErrors.isEmpty) ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#222222">monsters.</span><span style="color:#6200EE">producesANewSequenceWhereEach</span><span style="color:#222222">((monster) => monster.hasClaws);</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="prefer-a-noun-phrase-for-a-non-boolean-property-or-variable">PREFER a noun phrase for a non-boolean property or variable</h3><a class="heading-link" href="#prefer-a-noun-phrase-for-a-non-boolean-property-or-variable" aria-label="Link to 'PREFER a noun phrase for a non-boolean property or variable' section">#</a></div><p>The reader's focus is on <em>what</em> the property is. If the user cares more about <em>how</em> a property is determined, then it should probably be a method with a verb phrase name.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.length</span></span>
<span class="line"><span style="color:#222222">context.lineWidth</span></span>
<span class="line"><span style="color:#222222">quest.rampagingSwampBeast</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.deleteItems</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="prefer-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable">PREFER a non-imperative verb phrase for a boolean property or variable</h3><a class="heading-link" href="#prefer-a-non-imperative-verb-phrase-for-a-boolean-property-or-variable" aria-label="Link to 'PREFER a non-imperative verb phrase for a boolean property or variable' section">#</a></div><p>Boolean names are often used as conditions in control flow, so you want a name that reads well there. Compare:</p><div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (window.closeable) ...  </span><span style="color:#6E6E70">// Adjective.</span></span>
<span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (window.canClose) ...   </span><span style="color:#6E6E70">// Verb.</span></span></code></pre></div></div><p>Good names tend to start with one of a few kinds of verbs:</p><ul><li><p>a form of &quot;to be&quot;: <code>isEnabled</code>, <code>wasShown</code>, <code>willFire</code>. These are, by far, the most common.</p></li><li><p>an <a href="https://en.wikipedia.org/wiki/Auxiliary_verb">auxiliary verb</a>: <code>hasElements</code>, <code>canClose</code>, <code>shouldConsume</code>, <code>mustSave</code>.</p></li><li><p>an active verb: <code>ignoresInput</code>, <code>wroteFile</code>. These are rare because they are usually ambiguous. <code>loggedResult</code> is a bad name because it could mean &quot;whether or not a result was logged&quot; or &quot;the result that was logged&quot;. Likewise, <code>closingConnection</code> could be &quot;whether the connection is closing&quot; or &quot;the connection that is closing&quot;. Active verbs are allowed when the name can <em>only</em> be read as a predicate.</p></li></ul><p>What separates all these verb phrases from method names is that they are not <em>imperative</em>. A boolean name should never sound like a command to tell the object to do something, because accessing a property doesn't change the object. (If the property <em>does</em> modify the object in a meaningful way, it should be a method.)</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">isEmpty</span></span>
<span class="line"><span style="color:#222222">hasElements</span></span>
<span class="line"><span style="color:#222222">canClose</span></span>
<span class="line"><span style="color:#222222">closesWindow</span></span>
<span class="line"><span style="color:#222222">canShowPopup</span></span>
<span class="line"><span style="color:#222222">hasShownPopup</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">empty         </span><span style="color:#6E6E70">// Adjective or verb?</span></span>
<span class="line"><span style="color:#222222">withElements  </span><span style="color:#6E6E70">// Sounds like it might hold elements.</span></span>
<span class="line"><span style="color:#222222">closeable     </span><span style="color:#6E6E70">// Sounds like an interface.</span></span>
<span class="line"><span style="color:#6E6E70">              // "canClose" reads better as a sentence.</span></span>
<span class="line"><span style="color:#222222">closingWindow </span><span style="color:#6E6E70">// Returns a bool or a window?</span></span>
<span class="line"><span style="color:#222222">showPopup     </span><span style="color:#6E6E70">// Sounds like it shows the popup.</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="consider-omitting-the-verb-for-a-named-boolean-parameter">CONSIDER omitting the verb for a named boolean <em>parameter</em></h3><a class="heading-link" href="#consider-omitting-the-verb-for-a-named-boolean-parameter" aria-label="Link to 'CONSIDER omitting the verb for a named boolean parameter' section">#</a></div><p>This refines the previous rule. For named parameters that are boolean, the name is often just as clear without the verb, and the code reads better at the call site.</p> <?code-excerpt "design_good.dart (omit-verb-for-bool-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Isolate</span><span style="color:#222222">.</span><span style="color:#6200EE">spawn</span><span style="color:#222222">(entryPoint, message, paused: </span><span style="color:#11796D">false</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> copy = </span><span style="color:#0468D7">List</span><span style="color:#222222">.</span><span style="color:#6200EE">from</span><span style="color:#222222">(elements, growable: </span><span style="color:#11796D">true</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> regExp = </span><span style="color:#0468D7">RegExp</span><span style="color:#222222">(pattern, caseSensitive: </span><span style="color:#11796D">false</span><span style="color:#222222">);</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="prefer-the-positive-name-for-a-boolean-property-or-variable">PREFER the &quot;positive&quot; name for a boolean property or variable</h3><a class="heading-link" href="#prefer-the-positive-name-for-a-boolean-property-or-variable" aria-label="Link to 'PREFER the &quot;positive&quot; name for a boolean property or variable' section">#</a></div><p>Most boolean names have conceptually &quot;positive&quot; and &quot;negative&quot; forms where the former feels like the fundamental concept and the latter is its negation&quot;open&quot; and &quot;closed&quot;, &quot;enabled&quot; and &quot;disabled&quot;, etc. Often the latter name literally has a prefix that negates the former: &quot;visible&quot; and &quot;<em>in</em>-visible&quot;, &quot;connected&quot; and &quot;<em>dis</em>-connected&quot;, &quot;zero&quot; and &quot;<em>non</em>-zero&quot;.</p><p>When choosing which of the two cases that <code>true</code> representsand thus which case the property is named forprefer the positive or more fundamental one. Boolean members are often nested inside logical expressions, including negation operators. If your property itself reads like a negation, it's harder for the reader to mentally perform the double negation and understand what the code means.</p> <?code-excerpt "design_good.dart (positive)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (socket.isConnected &#x26;&#x26; database.hasData) {</span></span>
<span class="line"><span style="color:#222222">  socket.</span><span style="color:#6200EE">write</span><span style="color:#222222">(database.</span><span style="color:#6200EE">read</span><span style="color:#222222">());</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (positive)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (!socket.isDisconnected &#x26;&#x26; !database.isEmpty) {</span></span>
<span class="line"><span style="color:#222222">  socket.</span><span style="color:#6200EE">write</span><span style="color:#222222">(database.</span><span style="color:#6200EE">read</span><span style="color:#222222">());</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>For some properties, there is no obvious positive form. Is a document that has been flushed to disk &quot;saved&quot; or &quot;<em>un</em>-changed&quot;? Is a document that <em>hasn't</em> been flushed &quot;<em>un</em>-saved&quot; or &quot;changed&quot;? In ambiguous cases, lean towards the choice that is less likely to be negated by users or has the shorter name.</p><p><strong>Exception:</strong> With some properties, the negative form is what users overwhelmingly need to use. Choosing the positive case would force them to negate the property with <code>!</code> everywhere. Instead, it may be better to use the negative case for that property.</p><div class="header-wrapper"><h3 id="prefer-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect">PREFER an imperative verb phrase for a function or method whose main purpose is a side effect</h3><a class="heading-link" href="#prefer-an-imperative-verb-phrase-for-a-function-or-method-whose-main-purpose-is-a-side-effect" aria-label="Link to 'PREFER an imperative verb phrase for a function or method whose main purpose is a side effect' section">#</a></div><p>Callable members can return a result to the caller and perform other work or side effects. In an imperative language like Dart, members are often called mainly for their side effect: they may change an object's internal state, produce some output, or talk to the outside world.</p><p>Those kinds of members should be named using an imperative verb phrase that clarifies the work the member performs.</p> <?code-excerpt "design_good.dart (verb-for-func-with-side-effect)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.</span><span style="color:#6200EE">add</span><span style="color:#222222">(</span><span style="color:#11796D">'element'</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#222222">queue.</span><span style="color:#6200EE">removeFirst</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">window.</span><span style="color:#6200EE">refresh</span><span style="color:#222222">();</span></span></code></pre></div></div><p>This way, an invocation reads like a command to do that work.</p><div class="header-wrapper"><h3 id="prefer-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose">PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose</h3><a class="heading-link" href="#prefer-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose" aria-label="Link to 'PREFER a noun phrase or non-imperative verb phrase for a function or method if returning a value is its primary purpose' section">#</a></div><p>Other callable members have few side effects but return a useful result to the caller. If the member needs no parameters to do that, it should generally be a getter. But sometimes a logical &quot;property&quot; needs some parameters. For example, <code>elementAt()</code> returns a piece of data from a collection, but it needs a parameter to know <em>which</em> piece of data to return.</p><p>This means the member is <em>syntactically</em> a method, but <em>conceptually</em> it is a property, and should be named as such using a phrase that describes <em>what</em> the member returns.</p> <?code-excerpt "design_good.dart (noun-for-func-returning-value)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> element = list.</span><span style="color:#6200EE">elementAt</span><span style="color:#222222">(</span><span style="color:#11796D">3</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> first = list.</span><span style="color:#6200EE">firstWhere</span><span style="color:#222222">(test);</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> char = string.</span><span style="color:#6200EE">codeUnitAt</span><span style="color:#222222">(</span><span style="color:#11796D">4</span><span style="color:#222222">);</span></span></code></pre></div></div><p>This guideline is deliberately softer than the previous one. Sometimes a method has no side effects but is still simpler to name with a verb phrase like <code>list.take()</code> or <code>string.split()</code>.</p><div class="header-wrapper"><h3 id="consider-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs">CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs</h3><a class="heading-link" href="#consider-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs" aria-label="Link to 'CONSIDER an imperative verb phrase for a function or method if you want to draw attention to the work it performs' section">#</a></div><p>When a member produces a result without any side effects, it should usually be a getter or a method with a noun phrase name describing the result it returns. However, sometimes the work required to produce that result is important. It may be prone to runtime failures, or use heavyweight resources like networking or file I/O. In cases like this, where you want the caller to think about the work the member is doing, give the member a verb phrase name that describes that work.</p> <?code-excerpt "design_good.dart (verb-for-func-with-work)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> table = database.</span><span style="color:#6200EE">downloadData</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> packageVersions = packageGraph.</span><span style="color:#6200EE">solveConstraints</span><span style="color:#222222">();</span></span></code></pre></div></div><p>Note, though, that this guideline is softer than the previous two. The work an operation performs is often an implementation detail that isn't relevant to the caller, and performance and robustness boundaries change over time. Most of the time, name your members based on <em>what</em> they do for the caller, not <em>how</em> they do it.</p><div class="header-wrapper"><h3 id="avoid-starting-a-method-name-with-get">AVOID starting a method name with <code>get</code></h3><a class="heading-link" href="#avoid-starting-a-method-name-with-get" aria-label="Link to 'AVOID starting a method name with get' section">#</a></div><p>In most cases, the method should be a getter with <code>get</code> removed from the name. For example, instead of a method named <code>getBreakfastOrder()</code>, define a getter named <code>breakfastOrder</code>.</p><p>Even if the member does need to be a method because it takes arguments or otherwise isn't a good fit for a getter, you should still avoid <code>get</code>. Like the previous guidelines state, either:</p><ul><li><p>Simply drop <code>get</code> and <a href="#prefer-a-noun-phrase-or-non-imperative-verb-phrase-for-a-function-or-method-if-returning-a-value-is-its-primary-purpose">use a noun phrase name</a> like <code>breakfastOrder()</code> if the caller mostly cares about the value the method returns.</p></li><li><p><a href="#consider-an-imperative-verb-phrase-for-a-function-or-method-if-you-want-to-draw-attention-to-the-work-it-performs">Use a verb phrase name</a> if the caller cares about the work being done, but pick a verb that more precisely describes the work than <code>get</code>, like <code>create</code>, <code>download</code>, <code>fetch</code>, <code>calculate</code>, <code>request</code>, <code>aggregate</code>, etc.</p></li></ul><div class="header-wrapper"><h3 id="prefer-naming-a-method-to___-if-it-copies-the-objects-state-to-a-new-object">PREFER naming a method <code>to___()</code> if it copies the object's state to a new object</h3><a class="heading-link" href="#prefer-naming-a-method-to___-if-it-copies-the-objects-state-to-a-new-object" aria-label="Link to 'PREFER naming a method to___() if it copies the object's state to a new object' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/use_to_and_as_if_applicable.html">use_to_and_as_if_applicable</a></p><p>A <em>conversion</em> method is one that returns a new object containing a copy of almost all of the state of the receiver but usually in some different form or representation. The core libraries have a convention that these methods are named starting with <code>to</code> followed by the kind of result.</p><p>If you define a conversion method, it's helpful to follow that convention.</p> <?code-excerpt "design_good.dart (to-misc)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.</span><span style="color:#6200EE">toSet</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">stackTrace.</span><span style="color:#6200EE">toString</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">dateTime.</span><span style="color:#6200EE">toLocal</span><span style="color:#222222">();</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="prefer-naming-a-method-as___-if-it-returns-a-different-representation-backed-by-the-original-object">PREFER naming a method <code>as___()</code> if it returns a different representation backed by the original object</h3><a class="heading-link" href="#prefer-naming-a-method-as___-if-it-returns-a-different-representation-backed-by-the-original-object" aria-label="Link to 'PREFER naming a method as___() if it returns a different representation backed by the original object' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/use_to_and_as_if_applicable.html">use_to_and_as_if_applicable</a></p><p>Conversion methods are &quot;snapshots&quot;. The resulting object has its own copy of the original object's state. There are other conversion-like methods that return <em>views</em>they provide a new object, but that object refers back to the original. Later changes to the original object are reflected in the view.</p><p>The core library convention for you to follow is <code>as___()</code>.</p> <?code-excerpt "design_good.dart (as-misc)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> map = table.</span><span style="color:#6200EE">asMap</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> list = bytes.</span><span style="color:#6200EE">asFloat32List</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> future = subscription.</span><span style="color:#6200EE">asFuture</span><span style="color:#222222">();</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="avoid-describing-the-parameters-in-the-functions-or-methods-name">AVOID describing the parameters in the function's or method's name</h3><a class="heading-link" href="#avoid-describing-the-parameters-in-the-functions-or-methods-name" aria-label="Link to 'AVOID describing the parameters in the function's or method's name' section">#</a></div><p>The user will see the argument at the call site, so it usually doesn't help readability to also refer to it in the name itself.</p> <?code-excerpt "design_good.dart (avoid-desc-param-in-func)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.</span><span style="color:#6200EE">add</span><span style="color:#222222">(element);</span></span>
<span class="line"><span style="color:#222222">map.</span><span style="color:#6200EE">remove</span><span style="color:#222222">(key);</span></span></code></pre></div></div><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">list.</span><span style="color:#6200EE">addElement</span><span style="color:#222222">(element)</span></span>
<span class="line"><span style="color:#222222">map.</span><span style="color:#6200EE">removeKey</span><span style="color:#222222">(key)</span></span></code></pre></div></div><p>However, it can be useful to mention a parameter to disambiguate it from other similarly-named methods that take different types:</p> <?code-excerpt "design_good.dart (desc-param-in-func-ok)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">map.</span><span style="color:#6200EE">containsKey</span><span style="color:#222222">(key);</span></span>
<span class="line"><span style="color:#222222">map.</span><span style="color:#6200EE">containsValue</span><span style="color:#222222">(value);</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-follow-existing-mnemonic-conventions-when-naming-type-parameters">DO follow existing mnemonic conventions when naming type parameters</h3><a class="heading-link" href="#do-follow-existing-mnemonic-conventions-when-naming-type-parameters" aria-label="Link to 'DO follow existing mnemonic conventions when naming type parameters' section">#</a></div><p>Single letter names aren't exactly illuminating, but almost all generic types use them. Fortunately, they mostly use them in a consistent, mnemonic way. The conventions are:</p><ul><li><p><code>E</code> for the <strong>element</strong> type in a collection:</p> <?code-excerpt "design_good.dart (type-parameter-e)" replace="/\n\n/\n/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> IterableBase</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> {}</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> {}</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> HashSet</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> {}</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> RedBlackTree</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> {}</span></span></code></pre></div></div></li><li><p><code>K</code> and <code>V</code> for the <strong>key</strong> and <strong>value</strong> types in an associative collection:</p> <?code-excerpt "design_good.dart (type-parameter-k-v)" replace="/\n\n/\n/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Map</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">K</span><span style="color:#222222">, </span><span style="color:#0468D7">V</span><span style="color:#222222">> {}</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Multimap</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">K</span><span style="color:#222222">, </span><span style="color:#0468D7">V</span><span style="color:#222222">> {}</span></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> MapEntry</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">K</span><span style="color:#222222">, </span><span style="color:#0468D7">V</span><span style="color:#222222">> {}</span></span></code></pre></div></div></li><li><p><code>R</code> for a type used as the <strong>return</strong> type of a function or a class's methods. This isn't common, but appears in typedefs sometimes and in classes that implement the visitor pattern:</p> <?code-excerpt "design_good.dart (type-parameter-r)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">abstract</span><span style="color:#D43324"> class</span><span style="color:#0468D7"> ExpressionVisitor</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">R</span><span style="color:#222222">> {</span></span>
<span class="line"><span style="color:#0468D7">  R</span><span style="color:#6200EE"> visitBinary</span><span style="color:#222222">(</span><span style="color:#0468D7">BinaryExpression</span><span style="color:#222222"> node);</span></span>
<span class="line"><span style="color:#0468D7">  R</span><span style="color:#6200EE"> visitLiteral</span><span style="color:#222222">(</span><span style="color:#0468D7">LiteralExpression</span><span style="color:#222222"> node);</span></span>
<span class="line"><span style="color:#0468D7">  R</span><span style="color:#6200EE"> visitUnary</span><span style="color:#222222">(</span><span style="color:#0468D7">UnaryExpression</span><span style="color:#222222"> node);</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div></li><li><p>Otherwise, use <code>T</code>, <code>S</code>, and <code>U</code> for generics that have a single type parameter and where the surrounding type makes its meaning obvious. There are multiple letters here to allow nesting without shadowing a surrounding name. For example:</p> <?code-excerpt "design_good.dart (type-parameter-t)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Future</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> {</span></span>
<span class="line"><span style="color:#0468D7">  Future</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">S</span><span style="color:#222222">> </span><span style="color:#6200EE">then</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">S</span><span style="color:#222222">>(</span><span style="color:#0468D7">FutureOr</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">S</span><span style="color:#222222">> </span><span style="color:#6200EE">onValue</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222"> value)) => ...</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Here, the generic method <code>then&lt;S&gt;()</code> uses <code>S</code> to avoid shadowing the <code>T</code> on <code>Future&lt;T&gt;</code>.</p></li></ul><p>If none of the above cases are a good fit, then either another single-letter mnemonic name or a descriptive name is fine:</p> <?code-excerpt "design_good.dart (type-parameter-graph)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Graph</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">N</span><span style="color:#222222">, </span><span style="color:#0468D7">E</span><span style="color:#222222">> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">N</span><span style="color:#222222">> nodes = [];</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> edges = [];</span></span>
<span class="line"><span style="color:#222222">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Graph</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Node</span><span style="color:#222222">, </span><span style="color:#0468D7">Edge</span><span style="color:#222222">> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Node</span><span style="color:#222222">> nodes = [];</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Edge</span><span style="color:#222222">> edges = [];</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>In practice, the existing conventions cover most type parameters.</p><div class="header-wrapper"><h2 id="libraries">Libraries</h2><a class="heading-link" href="#libraries" aria-label="Link to 'Libraries' section">#</a></div><p>A leading underscore character ( <code>_</code> ) indicates that a member is private to its library. This is not mere convention, but is built into the language itself.</p><div class="header-wrapper"><h3 id="prefer-making-declarations-private">PREFER making declarations private</h3><a class="heading-link" href="#prefer-making-declarations-private" aria-label="Link to 'PREFER making declarations private' section">#</a></div><p>A public declaration in a libraryeither top level or in a classis a signal that other libraries can and should access that member. It is also a commitment on your library's part to support that and behave properly when it happens.</p><p>If that's not what you intend, add the little <code>_</code> and be happy. Narrow public interfaces are easier for you to maintain and easier for users to learn. As a nice bonus, the analyzer will tell you about unused private declarations so you can delete dead code. It can't do that if the member is public because it doesn't know if any code outside of its view is using it.</p><div class="header-wrapper"><h3 id="consider-declaring-multiple-classes-in-the-same-library">CONSIDER declaring multiple classes in the same library</h3><a class="heading-link" href="#consider-declaring-multiple-classes-in-the-same-library" aria-label="Link to 'CONSIDER declaring multiple classes in the same library' section">#</a></div><p>Some languages, such as Java, tie the organization of files to the organization of classeseach file may only define a single top level class. Dart does not have that limitation. Libraries are distinct entities separate from classes. It's perfectly fine for a single library to contain multiple classes, top level variables, and functions if they all logically belong together.</p><p>Placing multiple classes together in one library can enable some useful patterns. Since privacy in Dart works at the library level, not the class level, this is a way to define &quot;friend&quot; classes like you might in C++. Every class declared in the same library can access each other's private members, but code outside of that library cannot.</p><p>Of course, this guideline doesn't mean you <em>should</em> put all of your classes into a huge monolithic library, just that you are allowed to place more than one class in a single library.</p><div class="header-wrapper"><h2 id="classes-and-mixins">Classes and mixins</h2><a class="heading-link" href="#classes-and-mixins" aria-label="Link to 'Classes and mixins' section">#</a></div><p>Dart is a &quot;pure&quot; object-oriented language in that all objects are instances of classes. But Dart does not require all code to be defined inside a classyou can define top-level variables, constants, and functions like you can in a procedural or functional language.</p><div class="header-wrapper"><h3 id="avoid-defining-a-one-member-abstract-class-when-a-simple-function-will-do">AVOID defining a one-member abstract class when a simple function will do</h3><a class="heading-link" href="#avoid-defining-a-one-member-abstract-class-when-a-simple-function-will-do" aria-label="Link to 'AVOID defining a one-member abstract class when a simple function will do' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/one_member_abstracts.html">one_member_abstracts</a></p><p>Unlike Java, Dart has first-class functions, closures, and a nice light syntax for using them. If all you need is something like a callback, just use a function. If you're defining a class and it only has a single abstract member with a meaningless name like <code>call</code> or <code>invoke</code>, there is a good chance you just want a function.</p> <?code-excerpt "design_good.dart (one-member-abstract-class)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">typedef</span><span style="color:#0468D7"> Predicate</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> = </span><span style="color:#0468D7">bool</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">E</span><span style="color:#222222"> element);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (one-member-abstract-class)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">abstract</span><span style="color:#D43324"> class</span><span style="color:#0468D7"> Predicate</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">E</span><span style="color:#222222">> {</span></span>
<span class="line"><span style="color:#0468D7">  bool</span><span style="color:#6200EE"> test</span><span style="color:#222222">(</span><span style="color:#0468D7">E</span><span style="color:#222222"> element);</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="avoid-defining-a-class-that-contains-only-static-members">AVOID defining a class that contains only static members</h3><a class="heading-link" href="#avoid-defining-a-class-that-contains-only-static-members" aria-label="Link to 'AVOID defining a class that contains only static members' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_classes_with_only_static_members.html">avoid_classes_with_only_static_members</a></p><p>In Java and C#, every definition <em>must</em> be inside a class, so it's common to see &quot;classes&quot; that exist only as a place to stuff static members. Other classes are used as namespacesa way to give a shared prefix to a bunch of members to relate them to each other or avoid a name collision.</p><p>Dart has top-level functions, variables, and constants, so you don't <em>need</em> a class just to define something. If what you want is a namespace, a library is a better fit. Libraries support import prefixes and show/hide combinators. Those are powerful tools that let the consumer of your code handle name collisions in the way that works best for <em>them</em>.</p><p>If a function or variable isn't logically tied to a class, put it at the top level. If you're worried about name collisions, give it a more precise name or move it to a separate library that can be imported with a prefix.</p> <?code-excerpt "design_good.dart (class-only-static)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">DateTime</span><span style="color:#6200EE"> mostRecent</span><span style="color:#222222">(</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">DateTime</span><span style="color:#222222">> dates) {</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> dates.</span><span style="color:#6200EE">reduce</span><span style="color:#222222">((a, b) => a.</span><span style="color:#6200EE">isAfter</span><span style="color:#222222">(b) ? a : b);</span></span>
<span class="line"><span style="color:#222222">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">const</span><span style="color:#222222"> _favoriteMammal = </span><span style="color:#11796D">'weasel'</span><span style="color:#222222">;</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (class-only-static)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> DateUtils</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#0468D7"> DateTime</span><span style="color:#6200EE"> mostRecent</span><span style="color:#222222">(</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">DateTime</span><span style="color:#222222">> dates) {</span></span>
<span class="line"><span style="color:#D43324">    return</span><span style="color:#222222"> dates.</span><span style="color:#6200EE">reduce</span><span style="color:#222222">((a, b) => a.</span><span style="color:#6200EE">isAfter</span><span style="color:#222222">(b) ? a : b);</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> _Favorites</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> mammal = </span><span style="color:#11796D">'weasel'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>In idiomatic Dart, classes define <em>kinds of objects</em>. A type that is never instantiated is a code smell.</p><p>However, this isn't a hard rule. For example, with constants and enum-like types, it may be natural to group them in a class.</p> <?code-excerpt "design_bad.dart (class-only-static-exception)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Color</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> red = </span><span style="color:#11796D">'#f00'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> green = </span><span style="color:#11796D">'#0f0'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> blue = </span><span style="color:#11796D">'#00f'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> black = </span><span style="color:#11796D">'#000'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  static</span><span style="color:#D43324"> const</span><span style="color:#222222"> white = </span><span style="color:#11796D">'#fff'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="avoid-extending-a-class-that-isnt-intended-to-be-subclassed">AVOID extending a class that isn't intended to be subclassed</h3><a class="heading-link" href="#avoid-extending-a-class-that-isnt-intended-to-be-subclassed" aria-label="Link to 'AVOID extending a class that isn't intended to be subclassed' section">#</a></div><p>If a constructor is changed from a generative constructor to a factory constructor, any subclass constructor calling that constructor will break. Also, if a class changes which of its own methods it invokes on <code>this</code>, that may break subclasses that override those methods and expect them to be called at certain points.</p><p>Both of these mean that a class needs to be deliberate about whether or not it wants to allow subclassing. This can be communicated in a doc comment, or by giving the class an obvious name like <code>IterableBase</code>. If the author of the class doesn't do that, it's best to assume you should <em>not</em> extend the class. Otherwise, later changes to it may break your code.</p><div class="header-wrapper"><h3 id="do-document-if-your-class-supports-being-extended">DO document if your class supports being extended</h3><a class="heading-link" href="#do-document-if-your-class-supports-being-extended" aria-label="Link to 'DO document if your class supports being extended' section">#</a></div><p>This is the corollary to the above rule. If you want to allow subclasses of your class, state that. Suffix the class name with <code>Base</code>, or mention it in the class's doc comment.</p><div class="header-wrapper"><h3 id="avoid-implementing-a-class-that-isnt-intended-to-be-an-interface">AVOID implementing a class that isn't intended to be an interface</h3><a class="heading-link" href="#avoid-implementing-a-class-that-isnt-intended-to-be-an-interface" aria-label="Link to 'AVOID implementing a class that isn't intended to be an interface' section">#</a></div><p>Implicit interfaces are a powerful tool in Dart to avoid having to repeat the contract of a class when it can be trivially inferred from the signatures of an implementation of that contract.</p><p>But implementing a class's interface is a very tight coupling to that class. It means virtually <em>any</em> change to the class whose interface you are implementing will break your implementation. For example, adding a new member to a class is usually a safe, non-breaking change. But if you are implementing that class's interface, now your class has a static error because it lacks an implementation of that new method.</p><p>Library maintainers need the ability to evolve existing classes without breaking users. If you treat every class like it exposes an interface that users are free to implement, then changing those classes becomes very difficult. That difficulty in turn means the libraries you rely on are slower to grow and adapt to new needs.</p><p>To give the authors of the classes you use more leeway, avoid implementing implicit interfaces except for classes that are clearly intended to be implemented. Otherwise, you may introduce a coupling that the author doesn't intend, and they may break your code without realizing it.</p><div class="header-wrapper"><h3 id="do-document-if-your-class-supports-being-used-as-an-interface">DO document if your class supports being used as an interface</h3><a class="heading-link" href="#do-document-if-your-class-supports-being-used-as-an-interface" aria-label="Link to 'DO document if your class supports being used as an interface' section">#</a></div><p>If your class can be used as an interface, mention that in the class's doc comment.</p><p><a id="do-use-mixin-to-define-a-mixin-type"></a> <a id="avoid-mixing-in-a-class-that-isnt-intended-to-be-a-mixin"></a></p><div class="header-wrapper"><h3 id="prefer-defining-a-pure-mixin-or-pure-class-to-a-mixin-class">PREFER defining a pure <code>mixin</code> or pure <code>class</code> to a <code>mixin class</code></h3><a class="heading-link" href="#prefer-defining-a-pure-mixin-or-pure-class-to-a-mixin-class" aria-label="Link to 'PREFER defining a pure mixin or pure class to a mixin class' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/prefer_mixin.html">prefer_mixin</a></p><p>Dart previously (language version <a href="../resources/language/evolution.html#dart-2-12">2.12</a> to <a href="../resources/language/evolution.html#dart-2-19">2.19</a>) allowed any class that met certain restrictions (no non-default constructor, no superclass, etc.) to be mixed into other classes. This was confusing because the author of the class might not have intended it to be mixed in.</p><p>Dart 3.0.0 now requires that any type intended to be mixed into other classes, as well as treated as a normal class, must be explicitly declared as such with the <code>mixin class</code> declaration.</p><p>Types that need to be both a mixin and a class should be a rare case, however. The <code>mixin class</code> declaration is mostly meant to help migrate pre-3.0.0 classes being used as mixins to a more explicit declaration. New code should clearly define the behavior and intention of its declarations by using only pure <code>mixin</code> or pure <code>class</code> declarations, and avoid the ambiguity of mixin classes.</p><p>Read <a href="../language/class-modifiers-for-apis.html#migrating-classes-as-mixins">Migrating classes as mixins</a> for more guidance on <code>mixin</code> and <code>mixin class</code> declarations.</p><div class="header-wrapper"><h2 id="constructors">Constructors</h2><a class="heading-link" href="#constructors" aria-label="Link to 'Constructors' section">#</a></div><p>Dart constructors are created by declaring a function with the same name as the class and, optionally, an additional identifier. The latter are called <em>named constructors</em>.</p><div class="header-wrapper"><h3 id="consider-making-your-constructor-const-if-the-class-supports-it">CONSIDER making your constructor <code>const</code> if the class supports it</h3><a class="heading-link" href="#consider-making-your-constructor-const-if-the-class-supports-it" aria-label="Link to 'CONSIDER making your constructor const if the class supports it' section">#</a></div><p>If you have a class where all the fields are final, and the constructor does nothing but initialize them, you can make that constructor <code>const</code>. That lets users create instances of your class in places where constants are requiredinside other larger constants, switch cases, default parameter values, etc.</p><p>If you don't explicitly make it <code>const</code>, they aren't able to do that.</p><p>Note, however, that a <code>const</code> constructor is a commitment in your public API. If you later change the constructor to non-<code>const</code>, it will break users that are calling it in constant expressions. If you don't want to commit to that, don't make it <code>const</code>. In practice, <code>const</code> constructors are most useful for simple, immutable value-like types.</p><div class="header-wrapper"><h2 id="members">Members</h2><a class="heading-link" href="#members" aria-label="Link to 'Members' section">#</a></div><p>A member belongs to an object and can be either methods or instance variables.</p><div class="header-wrapper"><h3 id="prefer-making-fields-and-top-level-variables-final">PREFER making fields and top-level variables <code>final</code></h3><a class="heading-link" href="#prefer-making-fields-and-top-level-variables-final" aria-label="Link to 'PREFER making fields and top-level variables final' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/prefer_final_fields.html">prefer_final_fields</a></p><p>State that is not <em>mutable</em>that does not change over timeis easier for programmers to reason about. Classes and libraries that minimize the amount of mutable state they work with tend to be easier to maintain. Of course, it is often useful to have mutable data. But, if you don't need it, your default should be to make fields and top-level variables <code>final</code> when you can.</p><p>Sometimes an instance field doesn't change after it has been initialized, but can't be initialized until after the instance is constructed. For example, it may need to reference <code>this</code> or some other field on the instance. In cases like that, consider making the field <code>late final</code>. When you do, you may also be able to <a href="usage.html#do-initialize-fields-at-their-declaration-when-possible">initialize the field at its declaration</a>.</p><div class="header-wrapper"><h3 id="do-use-getters-for-operations-that-conceptually-access-properties">DO use getters for operations that conceptually access properties</h3><a class="heading-link" href="#do-use-getters-for-operations-that-conceptually-access-properties" aria-label="Link to 'DO use getters for operations that conceptually access properties' section">#</a></div><p>Deciding when a member should be a getter versus a method is a subtle but important part of good API design, hence this very long guideline. Some other language's cultures shy away from getters. They only use them when the operation is almost exactly like a fieldit does a minuscule amount of calculation on state that lives entirely on the object. Anything more complex or heavyweight than that gets <code>()</code> after the name to signal &quot;computation goin' on here!&quot; because a bare name after a <code>.</code> means &quot;field&quot;.</p><p>Dart is <em>not</em> like that. In Dart, <em>all</em> dotted names are member invocations that may do computation. Fields are specialthey're getters whose implementation is provided by the language. In other words, getters are not &quot;particularly slow fields&quot; in Dart; fields are &quot;particularly fast getters&quot;.</p><p>Even so, choosing a getter over a method sends an important signal to the caller. The signal, roughly, is that the operation is &quot;field-like&quot;. The operation, at least in principle, <em>could</em> be implemented using a field, as far as the caller knows. That implies:</p><ul><li><p><strong>The operation does not take any arguments and returns a result.</strong></p></li><li><p><strong>The caller cares mostly about the result.</strong> If you want the caller to worry about <em>how</em> the operation produces its result more than they do the result being produced, then give the operation a verb name that describes the work and make it a method.</p><p>This does <em>not</em> mean the operation has to be particularly fast in order to be a getter. <code>IterableBase.length</code> is <code>O(n)</code>, and that's OK. It's fine for a getter to do significant calculation. But if it does a <em>surprising</em> amount of work, you may want to draw their attention to that by making it a method whose name is a verb describing what it does.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">connection.nextIncomingMessage; </span><span style="color:#6E6E70">// Does network I/O.</span></span>
<span class="line"><span style="color:#222222">expression.normalForm; </span><span style="color:#6E6E70">// Could be exponential to calculate.</span></span></code></pre></div></div></li><li><p><strong>The operation does not have user-visible side effects.</strong> Accessing a real field does not alter the object or any other state in the program. It doesn't produce output, write files, etc. A getter shouldn't do those things either.</p><p>The &quot;user-visible&quot; part is important. It's fine for getters to modify hidden state or produce out of band side effects. Getters can lazily calculate and store their result, write to a cache, log stuff, etc. As long as the caller doesn't <em>care</em> about the side effect, it's probably fine.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">stdout.newline; </span><span style="color:#6E6E70">// Produces output.</span></span>
<span class="line"><span style="color:#222222">list.clear; </span><span style="color:#6E6E70">// Modifies object.</span></span></code></pre></div></div></li><li><p><strong>The operation is <em>idempotent</em>.</strong> &quot;Idempotent&quot; is an odd word that, in this context, basically means that calling the operation multiple times produces the same result each time, unless some state is explicitly modified between those calls. (Obviously, <code>list.length</code> produces different results if you add an element to the list between calls.)</p><p>&quot;Same result&quot; here does not mean a getter must literally produce an identical object on successive calls. Requiring that would force many getters to have brittle caching, which negates the whole point of using a getter. It's common, and perfectly fine, for a getter to return a new future or list each time you call it. The important part is that the future completes to the same value, and the list contains the same elements.</p><p>In other words, the result value should be the same <em>in the aspects that the caller cares about.</em></p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">DateTime</span><span style="color:#222222">.now; </span><span style="color:#6E6E70">// New result each time.</span></span></code></pre></div></div></li><li><p><strong>The resulting object doesn't expose all of the original object's state.</strong> A field exposes only a piece of an object. If your operation returns a result that exposes the original object's entire state, it's likely better off as a <a href="#prefer-naming-a-method-to___-if-it-copies-the-objects-state-to-a-new-object"><code>to___()</code></a> or <a href="#prefer-naming-a-method-as___-if-it-returns-a-different-representation-backed-by-the-original-object"><code>as___()</code></a> method.</p></li></ul><p>If all of the above describe your operation, it should be a getter. It seems like few members would survive that gauntlet, but surprisingly many do. Many operations just do some computation on some state and most of those can and should be getters.</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">rectangle.area;</span></span>
<span class="line"><span style="color:#222222">collection.isEmpty;</span></span>
<span class="line"><span style="color:#222222">button.canShow;</span></span>
<span class="line"><span style="color:#222222">dataSet.minimumValue;</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-use-setters-for-operations-that-conceptually-change-properties">DO use setters for operations that conceptually change properties</h3><a class="heading-link" href="#do-use-setters-for-operations-that-conceptually-change-properties" aria-label="Link to 'DO use setters for operations that conceptually change properties' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/use_setters_to_change_properties.html">use_setters_to_change_properties</a></p><p>Deciding between a setter versus a method is similar to deciding between a getter versus a method. In both cases, the operation should be &quot;field-like&quot;.</p><p>For a setter, &quot;field-like&quot; means:</p><ul><li><p><strong>The operation takes a single argument and does not produce a result value.</strong></p></li><li><p><strong>The operation changes some state in the object.</strong></p></li><li><p><strong>The operation is idempotent.</strong> Calling the same setter twice with the same value should do nothing the second time as far as the caller is concerned. Internally, maybe you've got some cache invalidation or logging going on. That's fine. But from the caller's perspective, it appears that the second call does nothing.</p></li></ul><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">rectangle.width = </span><span style="color:#11796D">3</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">button.visible = </span><span style="color:#11796D">false</span><span style="color:#222222">;</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="dont-define-a-setter-without-a-corresponding-getter">DON'T define a setter without a corresponding getter</h3><a class="heading-link" href="#dont-define-a-setter-without-a-corresponding-getter" aria-label="Link to 'DON'T define a setter without a corresponding getter' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_setters_without_getters.html">avoid_setters_without_getters</a></p><p>Users think of getters and setters as visible properties of an object. A &quot;dropbox&quot; property that can be written to but not seen is confusing and confounds their intuition about how properties work. For example, a setter without a getter means you can use <code>=</code> to modify it, but not <code>+=</code>.</p><p>This guideline does <em>not</em> mean you should add a getter just to permit the setter you want to add. Objects shouldn't generally expose more state than they need to. If you have some piece of an object's state that can be modified but not exposed in the same way, use a method instead.</p><div class="header-wrapper"><h3 id="avoid-using-runtime-type-tests-to-fake-overloading">AVOID using runtime type tests to fake overloading</h3><a class="heading-link" href="#avoid-using-runtime-type-tests-to-fake-overloading" aria-label="Link to 'AVOID using runtime type tests to fake overloading' section">#</a></div><p>It's common for an API to support similar operations on different types of parameters. To emphasize the similarity, some languages support <em>overloading</em>, which lets you define multiple methods that have the same name but different parameter lists. At compile time, the compiler looks at the actual argument types to determine which method to call.</p><p>Dart doesn't have overloading. You can define an API that looks like overloading by defining a single method and then using <code>is</code> type tests inside the body to look at the runtime types of the arguments and perform the appropriate behavior. However, faking overloading this way turns a <em>compile time</em> method selection into a choice that happens at <em>runtime</em>.</p><p>If callers usually know which type they have and which specific operation they want, it's better to define separate methods with different names to let callers select the right operation. This gives better static type checking and faster performance since it avoids any runtime type tests.</p><p>However, if users might have an object of an unknown type and <em>want</em> the API to internally use <code>is</code> to pick the right operation, then a single method where the parameter is a supertype of all of the supported types might be reasonable.</p><div class="header-wrapper"><h3 id="avoid-public-late-final-fields-without-initializers">AVOID public <code>late final</code> fields without initializers</h3><a class="heading-link" href="#avoid-public-late-final-fields-without-initializers" aria-label="Link to 'AVOID public late final fields without initializers' section">#</a></div><p>Unlike other <code>final</code> fields, a <code>late final</code> field without an initializer <em>does</em> define a setter. If that field is public, then the setter is public. This is rarely what you want. Fields are usually marked <code>late</code> so that they can be initialized <em>internally</em> at some point in the instance's lifetime, often inside the constructor body.</p><p>Unless you <em>do</em> want users to call the setter, it's better to pick one of the following solutions:</p><ul><li>Don't use <code>late</code>.</li><li>Use a factory constructor to compute the <code>final</code> field values.</li><li>Use <code>late</code>, but initialize the <code>late</code> field at its declaration.</li><li>Use <code>late</code>, but make the <code>late</code> field private and define a public getter for it.</li></ul><div class="header-wrapper"><h3 id="avoid-returning-nullable-future-stream-and-collection-types">AVOID returning nullable <code>Future</code>, <code>Stream</code>, and collection types</h3><a class="heading-link" href="#avoid-returning-nullable-future-stream-and-collection-types" aria-label="Link to 'AVOID returning nullable Future, Stream, and collection types' section">#</a></div><p>When an API returns a container type, it has two ways to indicate the absence of data: It can return an empty container or it can return <code>null</code>. Users generally assume and prefer that you use an empty container to indicate &quot;no data&quot;. That way, they have a real object that they can call methods on like <code>isEmpty</code>.</p><p>To indicate that your API has no data to provide, prefer returning an empty collection, a non-nullable future of a nullable type, or a stream that doesn't emit any values.</p><p><strong>Exception:</strong> If returning <code>null</code> <em>means something different</em> from yielding an empty container, it might make sense to use a nullable type.</p><div class="header-wrapper"><h3 id="avoid-returning-this-from-methods-just-to-enable-a-fluent-interface">AVOID returning <code>this</code> from methods just to enable a fluent interface</h3><a class="heading-link" href="#avoid-returning-this-from-methods-just-to-enable-a-fluent-interface" aria-label="Link to 'AVOID returning this from methods just to enable a fluent interface' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_returning_this.html">avoid_returning_this</a></p><p>Method cascades are a better solution for chaining method calls.</p> <?code-excerpt "design_good.dart (cascades)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> buffer = </span><span style="color:#0468D7">StringBuffer</span><span style="color:#222222">()</span></span>
<span class="line"><span style="color:#222222">  ..</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'one'</span><span style="color:#222222">)</span></span>
<span class="line"><span style="color:#222222">  ..</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'two'</span><span style="color:#222222">)</span></span>
<span class="line"><span style="color:#222222">  ..</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'three'</span><span style="color:#222222">);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (cascades)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> buffer = </span><span style="color:#0468D7">StringBuffer</span><span style="color:#222222">()</span></span>
<span class="line"><span style="color:#222222">    .</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'one'</span><span style="color:#222222">)</span></span>
<span class="line"><span style="color:#222222">    .</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'two'</span><span style="color:#222222">)</span></span>
<span class="line"><span style="color:#222222">    .</span><span style="color:#6200EE">write</span><span style="color:#222222">(</span><span style="color:#11796D">'three'</span><span style="color:#222222">);</span></span></code></pre></div></div><div class="header-wrapper"><h2 id="types">Types</h2><a class="heading-link" href="#types" aria-label="Link to 'Types' section">#</a></div><p>When you write down a type in your program, you constrain the kinds of values that flow into different parts of your code. Types can appear in two kinds of places: <em>type annotations</em> on declarations and type arguments to <em>generic invocations</em>.</p><p>Type annotations are what you normally think of when you think of &quot;static types&quot;. You can type annotate a variable, parameter, field, or return type. In the following example, <code>bool</code> and <code>String</code> are type annotations. They hang off the static declarative structure of the code and aren't &quot;executed&quot; at runtime.</p> <?code-excerpt "design_good.dart (annotate-declaration)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">bool</span><span style="color:#6200EE"> isEmpty</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> parameter) {</span></span>
<span class="line"><span style="color:#0468D7">  bool</span><span style="color:#222222"> result = parameter.isEmpty;</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> result;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>A generic invocation is a collection literal, a call to a generic class's constructor, or an invocation of a generic method. In the next example, <code>num</code> and <code>int</code> are type arguments on generic invocations. Even though they are types, they are first-class entities that get reified and passed to the invocation at runtime.</p> <?code-excerpt "design_good.dart (annotate-invocation)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> lists = &#x3C;</span><span style="color:#0468D7">num</span><span style="color:#222222">>[</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">];</span></span>
<span class="line"><span style="color:#222222">lists.</span><span style="color:#6200EE">addAll</span><span style="color:#222222">(</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">num</span><span style="color:#222222">>.</span><span style="color:#6200EE">filled</span><span style="color:#222222">(</span><span style="color:#11796D">3</span><span style="color:#222222">, </span><span style="color:#11796D">4</span><span style="color:#222222">));</span></span>
<span class="line"><span style="color:#222222">lists.</span><span style="color:#6200EE">cast</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">>();</span></span></code></pre></div></div><p>We stress the &quot;generic invocation&quot; part here, because type arguments can <em>also</em> appear in type annotations:</p> <?code-excerpt "design_good.dart (annotate-type-arg)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> ints = [</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">];</span></span></code></pre></div></div><p>Here, <code>int</code> is a type argument, but it appears inside a type annotation, not a generic invocation. You usually don't need to worry about this distinction, but in a couple of places, we have different guidance for when a type is used in a generic invocation as opposed to a type annotation.</p><div class="header-wrapper"><h4 id="type-inference">Type inference</h4><a class="heading-link" href="#type-inference" aria-label="Link to 'Type inference' section">#</a></div><p>Type annotations are optional in Dart. If you omit one, Dart tries to infer a type based on the nearby context. Sometimes it doesn't have enough information to infer a complete type. When that happens, Dart sometimes reports an error, but usually silently fills in any missing parts with <code>dynamic</code>. The implicit <code>dynamic</code> leads to code that <em>looks</em> inferred and safe, but actually disables type checking completely. The rules below avoid that by requiring types when inference fails.</p><p>The fact that Dart has both type inference and a <code>dynamic</code> type leads to some confusion about what it means to say code is &quot;untyped&quot;. Does that mean the code is dynamically typed, or that you didn't <em>write</em> the type? To avoid that confusion, we avoid saying &quot;untyped&quot; and instead use the following terminology:</p><ul><li><p>If the code is <em>type annotated</em>, the type was explicitly written in the code.</p></li><li><p>If the code is <em>inferred</em>, no type annotation was written, and Dart successfully figured out the type on its own. Inference can fail, in which case the guidelines don't consider that inferred.</p></li><li><p>If the code is <em>dynamic</em>, then its static type is the special <code>dynamic</code> type. Code can be explicitly annotated <code>dynamic</code> or it can be inferred.</p></li></ul><p>In other words, whether some code is annotated or inferred is orthogonal to whether it is <code>dynamic</code> or some other type.</p><p>Inference is a powerful tool to spare you the effort of writing and reading types that are obvious or uninteresting. It keeps the reader's attention focused on the behavior of the code itself. Explicit types are also a key part of robust, maintainable code. They define the static shape of an API and create boundaries to document and enforce what kinds of values are allowed to reach different parts of the program.</p><p>Of course, inference isn't magic. Sometimes inference succeeds and selects a type, but it's not the type you want. The common case is inferring an overly precise type from a variable's initializer when you intend to assign values of other types to the variable later. In those cases, you have to write the type explicitly.</p><p>The guidelines here strike the best balance we've found between brevity and control, flexibility and safety. There are specific guidelines to cover all the various cases, but the rough summary is:</p><ul><li><p>Do annotate when inference doesn't have enough context, even when <code>dynamic</code> is the type you want.</p></li><li><p>Don't annotate locals and generic invocations unless you need to.</p></li><li><p>Prefer annotating top-level variables and fields unless the initializer makes the type obvious.</p></li></ul><div class="header-wrapper"><h3 id="do-type-annotate-variables-without-initializers">DO type annotate variables without initializers</h3><a class="heading-link" href="#do-type-annotate-variables-without-initializers" aria-label="Link to 'DO type annotate variables without initializers' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/prefer_typing_uninitialized_variables.html">prefer_typing_uninitialized_variables</a></p><p>The type of a variabletop-level, local, static field, or instance fieldcan often be inferred from its initializer. However, if there is no initializer, inference fails.</p> <?code-excerpt "design_good.dart (uninitialized-local)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">AstNode</span><span style="color:#222222">> parameters;</span></span>
<span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (node is </span><span style="color:#0468D7">Constructor</span><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#222222">  parameters = node.signature;</span></span>
<span class="line"><span style="color:#222222">} </span><span style="color:#D43324">else</span><span style="color:#D43324"> if</span><span style="color:#222222"> (node is </span><span style="color:#0468D7">Method</span><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#222222">  parameters = node.parameters;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (uninitialized-local)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> parameters;</span></span>
<span class="line"><span style="color:#D43324">if</span><span style="color:#222222"> (node is </span><span style="color:#0468D7">Constructor</span><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#222222">  parameters = node.signature;</span></span>
<span class="line"><span style="color:#222222">} </span><span style="color:#D43324">else</span><span style="color:#D43324"> if</span><span style="color:#222222"> (node is </span><span style="color:#0468D7">Method</span><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#222222">  parameters = node.parameters;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-type-annotate-fields-and-top-level-variables-if-the-type-isnt-obvious">DO type annotate fields and top-level variables if the type isn't obvious</h3><a class="heading-link" href="#do-type-annotate-fields-and-top-level-variables-if-the-type-isnt-obvious" aria-label="Link to 'DO type annotate fields and top-level variables if the type isn't obvious' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/type_annotate_public_apis.html">type_annotate_public_apis</a></p><p>Type annotations are important documentation for how a library should be used. They form boundaries between regions of a program to isolate the source of a type error. Consider:</p> <?code-excerpt "design_bad.dart (type_annotate_public_apis)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6200EE">install</span><span style="color:#222222">(id, destination) => ...</span></span></code></pre></div></div><p>Here, it's unclear what <code>id</code> is. A string? And what is <code>destination</code>? A string or a <code>File</code> object? Is this method synchronous or asynchronous? This is clearer:</p> <?code-excerpt "design_good.dart (type_annotate_public_apis)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Future</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">bool</span><span style="color:#222222">> </span><span style="color:#6200EE">install</span><span style="color:#222222">(</span><span style="color:#0468D7">PackageId</span><span style="color:#222222"> id, </span><span style="color:#0468D7">String</span><span style="color:#222222"> destination) => ...</span></span></code></pre></div></div><p>In some cases, though, the type is so obvious that writing it is pointless:</p> <?code-excerpt "design_good.dart (inferred)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">const</span><span style="color:#222222"> screenWidth = </span><span style="color:#11796D">640</span><span style="color:#222222">; </span><span style="color:#6E6E70">// Inferred as int.</span></span></code></pre></div></div><p>&quot;Obvious&quot; isn't precisely defined, but these are all good candidates:</p><ul><li>Literals.</li><li>Constructor invocations.</li><li>References to other constants that are explicitly typed.</li><li>Simple expressions on numbers and strings.</li><li>Factory methods like <code>int.parse()</code>, <code>Future.wait()</code>, etc. that readers are expected to be familiar with.</li></ul><p>If you think the initializer expressionwhatever it isis sufficiently clear, then you may omit the annotation. But if you think annotating helps make the code clearer, then add one.</p><p>When in doubt, add a type annotation. Even when a type is obvious, you may still wish to explicitly annotate. If the inferred type relies on values or declarations from other libraries, you may want to type annotate <em>your</em> declaration so that a change to that other library doesn't silently change the type of your own API without you realizing.</p><p>This rule applies to both public and private declarations. Just as type annotations on APIs help <em>users</em> of your code, types on private members help <em>maintainers</em>.</p><div class="header-wrapper"><h3 id="dont-redundantly-type-annotate-initialized-local-variables">DON'T redundantly type annotate initialized local variables</h3><a class="heading-link" href="#dont-redundantly-type-annotate-initialized-local-variables" aria-label="Link to 'DON'T redundantly type annotate initialized local variables' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/omit_local_variable_types.html">omit_local_variable_types</a></p><p>Local variables, especially in modern code where functions tend to be small, have very little scope. Omitting the type focuses the reader's attention on the more important <em>name</em> of the variable and its initialized value.</p> <?code-excerpt "design_good.dart (omit-types-on-locals)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">>> </span><span style="color:#6200EE">possibleDesserts</span><span style="color:#222222">(</span><span style="color:#0468D7">Set</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">> pantry) {</span></span>
<span class="line"><span style="color:#D43324">  var</span><span style="color:#222222"> desserts = &#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">>>[];</span></span>
<span class="line"><span style="color:#D43324">  for</span><span style="color:#222222"> (</span><span style="color:#D43324">final</span><span style="color:#222222"> recipe </span><span style="color:#D43324">in</span><span style="color:#222222"> cookbook) {</span></span>
<span class="line"><span style="color:#D43324">    if</span><span style="color:#222222"> (pantry.</span><span style="color:#6200EE">containsAll</span><span style="color:#222222">(recipe)) {</span></span>
<span class="line"><span style="color:#222222">      desserts.</span><span style="color:#6200EE">add</span><span style="color:#222222">(recipe);</span></span>
<span class="line"><span style="color:#222222">    }</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> desserts;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (omit-types-on-locals)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">>> </span><span style="color:#6200EE">possibleDesserts</span><span style="color:#222222">(</span><span style="color:#0468D7">Set</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">> pantry) {</span></span>
<span class="line"><span style="color:#0468D7">  List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">>> desserts = &#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">>>[];</span></span>
<span class="line"><span style="color:#D43324">  for</span><span style="color:#222222"> (</span><span style="color:#D43324">final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Ingredient</span><span style="color:#222222">> recipe </span><span style="color:#D43324">in</span><span style="color:#222222"> cookbook) {</span></span>
<span class="line"><span style="color:#D43324">    if</span><span style="color:#222222"> (pantry.</span><span style="color:#6200EE">containsAll</span><span style="color:#222222">(recipe)) {</span></span>
<span class="line"><span style="color:#222222">      desserts.</span><span style="color:#6200EE">add</span><span style="color:#222222">(recipe);</span></span>
<span class="line"><span style="color:#222222">    }</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> desserts;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Sometimes the inferred type is not the type you want the variable to have. For example, you may intend to assign values of other types later. In that case, annotate the variable with the type you want.</p> <?code-excerpt "design_good.dart (upcast-local)" replace="/Widget result/[!Widget!] result/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Widget</span><span style="color:#6200EE"> build</span><span style="color:#222222">(</span><span style="color:#0468D7">BuildContext</span><span style="color:#222222"> context) {</span></span>
<span class="line"><span style="color:#0468D7">  </span><mark class="highlight"><span style="color:#0468D7">Widget</span></mark><span style="color:#222222"> result = </span><span style="color:#0468D7">Text</span><span style="color:#222222">(</span><span style="color:#11796D">'You won!'</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">  if</span><span style="color:#222222"> (applyPadding) {</span></span>
<span class="line"><span style="color:#222222">    result = </span><span style="color:#0468D7">Padding</span><span style="color:#222222">(padding: </span><span style="color:#0468D7">EdgeInsets</span><span style="color:#222222">.</span><span style="color:#6200EE">all</span><span style="color:#222222">(</span><span style="color:#11796D">8.0</span><span style="color:#222222">), child: result);</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> result;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-annotate-return-types-on-function-declarations">DO annotate return types on function declarations</h3><a class="heading-link" href="#do-annotate-return-types-on-function-declarations" aria-label="Link to 'DO annotate return types on function declarations' section">#</a></div><p>Dart doesn't generally infer the return type of a function declaration from its body, unlike some other languages. That means you should write a type annotation for the return type yourself.</p> <?code-excerpt "design_good.dart (annotate-return-types)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">String</span><span style="color:#6200EE"> makeGreeting</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> who) {</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#11796D"> 'Hello, </span><span style="color:#11796D">$</span><span style="color:#222222">who</span><span style="color:#11796D">!'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (annotate-return-types)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6200EE">makeGreeting</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> who) {</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#11796D"> 'Hello, </span><span style="color:#11796D">$</span><span style="color:#222222">who</span><span style="color:#11796D">!'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Note that this guideline only applies to <em>non-local</em> function declarations: top-level, static, and instance methods and getters. Local functions and anonymous function expressions infer a return type from their body. In fact, the anonymous function syntax doesn't even allow a return type annotation.</p><div class="header-wrapper"><h3 id="do-annotate-parameter-types-on-function-declarations">DO annotate parameter types on function declarations</h3><a class="heading-link" href="#do-annotate-parameter-types-on-function-declarations" aria-label="Link to 'DO annotate parameter types on function declarations' section">#</a></div><p>A function's parameter list determines its boundary to the outside world. Annotating parameter types makes that boundary well defined. Note that even though default parameter values look like variable initializers, Dart doesn't infer an optional parameter's type from its default value.</p> <?code-excerpt "design_good.dart (annotate-parameters)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">void</span><span style="color:#6200EE"> sayRepeatedly</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> message, {</span><span style="color:#0468D7">int</span><span style="color:#222222"> count = </span><span style="color:#11796D">2</span><span style="color:#222222">}) {</span></span>
<span class="line"><span style="color:#D43324">  for</span><span style="color:#222222"> (</span><span style="color:#D43324">var</span><span style="color:#222222"> i = </span><span style="color:#11796D">0</span><span style="color:#222222">; i &#x3C; count; i++) {</span></span>
<span class="line"><span style="color:#6200EE">    print</span><span style="color:#222222">(message);</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (annotate-parameters)" replace="/\(count as num\)/count/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">void</span><span style="color:#6200EE"> sayRepeatedly</span><span style="color:#222222">(message, {count = </span><span style="color:#11796D">2</span><span style="color:#222222">}) {</span></span>
<span class="line"><span style="color:#D43324">  for</span><span style="color:#222222"> (</span><span style="color:#D43324">var</span><span style="color:#222222"> i = </span><span style="color:#11796D">0</span><span style="color:#222222">; i &#x3C; count; i++) {</span></span>
<span class="line"><span style="color:#6200EE">    print</span><span style="color:#222222">(message);</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p><strong>Exception:</strong> Function expressions and initializing formals have different type annotation conventions, as described in the next two guidelines.</p><div class="header-wrapper"><h3 id="dont-annotate-inferred-parameter-types-on-function-expressions">DON'T annotate inferred parameter types on function expressions</h3><a class="heading-link" href="#dont-annotate-inferred-parameter-types-on-function-expressions" aria-label="Link to 'DON'T annotate inferred parameter types on function expressions' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_types_on_closure_parameters.html">avoid_types_on_closure_parameters</a></p><p>Anonymous functions are almost always immediately passed to a method taking a callback of some type. When a function expression is created in a typed context, Dart tries to infer the function's parameter types based on the expected type. For example, when you pass a function expression to <code>Iterable.map()</code>, your function's parameter type is inferred based on the type of callback that <code>map()</code> expects:</p> <?code-excerpt "design_good.dart (func-expr-no-param-type)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> names = people.</span><span style="color:#6200EE">map</span><span style="color:#222222">((person) => person.name);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (func-expr-no-param-type)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> names = people.</span><span style="color:#6200EE">map</span><span style="color:#222222">((</span><span style="color:#0468D7">Person</span><span style="color:#222222"> person) => person.name);</span></span></code></pre></div></div><p>If the language is able to infer the type you want for a parameter in a function expression, then don't annotate. In rare cases, the surrounding context isn't precise enough to provide a type for one or more of the function's parameters. In those cases, you may need to annotate. (If the function isn't used immediately, it's usually better to <a href="usage.html#do-use-a-function-declaration-to-bind-a-function-to-a-name">make it a named declaration</a>.)</p><div class="header-wrapper"><h3 id="dont-type-annotate-initializing-formals">DON'T type annotate initializing formals</h3><a class="heading-link" href="#dont-type-annotate-initializing-formals" aria-label="Link to 'DON'T type annotate initializing formals' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/type_init_formals.html">type_init_formals</a></p><p>If a constructor parameter is using <code>this.</code> to initialize a field, or <code>super.</code> to forward a super parameter, then the type of the parameter is inferred to have the same type as the field or super-constructor parameter respectively.</p> <?code-excerpt "design_good.dart (dont-type-init-formals)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Point</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#0468D7">  double</span><span style="color:#222222"> x, y;</span></span>
<span class="line"><span style="color:#0468D7">  Point</span><span style="color:#222222">(</span><span style="color:#D43324">this</span><span style="color:#222222">.x, </span><span style="color:#D43324">this</span><span style="color:#222222">.y);</span></span>
<span class="line"><span style="color:#222222">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> MyWidget</span><span style="color:#D43324"> extends</span><span style="color:#0468D7"> StatelessWidget</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#0468D7">  MyWidget</span><span style="color:#222222">({</span><span style="color:#D43324">super</span><span style="color:#222222">.key});</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (dont-type-init-formals)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Point</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#0468D7">  double</span><span style="color:#222222"> x, y;</span></span>
<span class="line"><span style="color:#0468D7">  Point</span><span style="color:#222222">(</span><span style="color:#0468D7">double</span><span style="color:#D43324"> this</span><span style="color:#222222">.x, </span><span style="color:#0468D7">double</span><span style="color:#D43324"> this</span><span style="color:#222222">.y);</span></span>
<span class="line"><span style="color:#222222">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> MyWidget</span><span style="color:#D43324"> extends</span><span style="color:#0468D7"> StatelessWidget</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#0468D7">  MyWidget</span><span style="color:#222222">({</span><span style="color:#0468D7">Key</span><span style="color:#222222">? </span><span style="color:#D43324">super</span><span style="color:#222222">.key});</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-write-type-arguments-on-generic-invocations-that-arent-inferred">DO write type arguments on generic invocations that aren't inferred</h3><a class="heading-link" href="#do-write-type-arguments-on-generic-invocations-that-arent-inferred" aria-label="Link to 'DO write type arguments on generic invocations that aren't inferred' section">#</a></div><p>Dart is pretty smart about inferring type arguments in generic invocations. It looks at the expected type where the expression occurs and the types of values being passed to the invocation. However, sometimes those aren't enough to fully determine a type argument. In that case, write the entire type argument list explicitly.</p> <?code-excerpt "design_good.dart (non-inferred-type-args)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> playerScores = &#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">, </span><span style="color:#0468D7">int</span><span style="color:#222222">>{};</span></span>
<span class="line"><span style="color:#D43324">final</span><span style="color:#222222"> events = </span><span style="color:#0468D7">StreamController</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Event</span><span style="color:#222222">>();</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (non-inferred-type-args)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> playerScores = {};</span></span>
<span class="line"><span style="color:#D43324">final</span><span style="color:#222222"> events = </span><span style="color:#0468D7">StreamController</span><span style="color:#222222">();</span></span></code></pre></div></div><p>Sometimes the invocation occurs as the initializer to a variable declaration. If the variable is <em>not</em> local, then instead of writing the type argument list on the invocation itself, you may put a type annotation on the declaration:</p> <?code-excerpt "design_good.dart (inferred-type-args)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Downloader</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> Completer</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">> response = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (inferred-type-args)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Downloader</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#222222"> response = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Annotating the variable also addresses this guideline because now the type arguments <em>are</em> inferred.</p><div class="header-wrapper"><h3 id="dont-write-type-arguments-on-generic-invocations-that-are-inferred">DON'T write type arguments on generic invocations that are inferred</h3><a class="heading-link" href="#dont-write-type-arguments-on-generic-invocations-that-are-inferred" aria-label="Link to 'DON'T write type arguments on generic invocations that are inferred' section">#</a></div><p>This is the converse of the previous rule. If an invocation's type argument list <em>is</em> correctly inferred with the types you want, then omit the types and let Dart do the work for you.</p> <?code-excerpt "design_good.dart (redundant)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Downloader</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> Completer</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">> response = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (redundant)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Downloader</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> Completer</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">> response = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">>();</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Here, the type annotation on the field provides a surrounding context to infer the type argument of constructor call in the initializer.</p> <?code-excerpt "design_good.dart (explicit)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> items = </span><span style="color:#0468D7">Future</span><span style="color:#222222">.</span><span style="color:#6200EE">value</span><span style="color:#222222">([</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">]);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (explicit)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> items = </span><span style="color:#0468D7">Future</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">>>.</span><span style="color:#6200EE">value</span><span style="color:#222222">(&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">>[</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">]);</span></span></code></pre></div></div><p>Here, the types of the collection and instance can be inferred bottom-up from their elements and arguments.</p><div class="header-wrapper"><h3 id="avoid-writing-incomplete-generic-types">AVOID writing incomplete generic types</h3><a class="heading-link" href="#avoid-writing-incomplete-generic-types" aria-label="Link to 'AVOID writing incomplete generic types' section">#</a></div><p>The goal of writing a type annotation or type argument is to pin down a complete type. However, if you write the name of a generic type but omit its type arguments, you haven't fully specified the type. In Java, these are called &quot;raw types&quot;. For example:</p> <?code-excerpt "design_bad.dart (incomplete-generic)" replace="/List|Map/[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><mark class="highlight"><span style="color:#0468D7">List</span></mark><span style="color:#222222"> numbers = [</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">];</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> completer = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">&#x3C;</span><mark class="highlight"><span style="color:#0468D7">Map</span></mark><span style="color:#222222">>();</span></span></code></pre></div></div><p>Here, <code>numbers</code> has a type annotation, but the annotation doesn't provide a type argument to the generic <code>List</code>. Likewise, the <code>Map</code> type argument to <code>Completer</code> isn't fully specified. In cases like this, Dart will <em>not</em> try to &quot;fill in&quot; the rest of the type for you using the surrounding context. Instead, it silently fills in any missing type arguments with <code>dynamic</code> (or the bound if the class has one). That's rarely what you want.</p><p>Instead, if you're writing a generic type either in a type annotation or as a type argument inside some invocation, make sure to write a complete type:</p> <?code-excerpt "design_good.dart (incomplete-generic)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">List</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">num</span><span style="color:#222222">> numbers = [</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">];</span></span>
<span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> completer = </span><span style="color:#0468D7">Completer</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">Map</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">, </span><span style="color:#0468D7">int</span><span style="color:#222222">>>();</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-annotate-with-dynamic-instead-of-letting-inference-fail">DO annotate with <code>dynamic</code> instead of letting inference fail</h3><a class="heading-link" href="#do-annotate-with-dynamic-instead-of-letting-inference-fail" aria-label="Link to 'DO annotate with dynamic instead of letting inference fail' section">#</a></div><p>When inference doesn't fill in a type, it usually defaults to <code>dynamic</code>. If <code>dynamic</code> is the type you want, this is technically the most terse way to get it. However, it's not the most <em>clear</em> way. A casual reader of your code who sees that an annotation is missing has no way of knowing if you intended it to be <code>dynamic</code>, expected inference to fill in some other type, or simply forgot to write the annotation.</p><p>When <code>dynamic</code> is the type you want, write that explicitly to make your intent clear and highlight that this code has less static safety.</p> <?code-excerpt "design_good.dart (prefer-dynamic)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">dynamic</span><span style="color:#6200EE"> mergeJson</span><span style="color:#222222">(</span><span style="color:#0468D7">dynamic</span><span style="color:#222222"> original, </span><span style="color:#0468D7">dynamic</span><span style="color:#222222"> changes) => ...</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (prefer-dynamic)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6200EE">mergeJson</span><span style="color:#222222">(original, changes) => ...</span></span></code></pre></div></div><p>Note that it's OK to omit the type when Dart <em>successfully</em> infers <code>dynamic</code>.</p> <?code-excerpt "design_good.dart (infer-dynamic)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Map</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">String</span><span style="color:#222222">, </span><span style="color:#0468D7">dynamic</span><span style="color:#222222">> </span><span style="color:#6200EE">readJson</span><span style="color:#222222">() => ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">void</span><span style="color:#6200EE"> printUsers</span><span style="color:#222222">() {</span></span>
<span class="line"><span style="color:#D43324">  var</span><span style="color:#222222"> json = </span><span style="color:#6200EE">readJson</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#D43324">  var</span><span style="color:#222222"> users = json[</span><span style="color:#11796D">'users'</span><span style="color:#222222">];</span></span>
<span class="line"><span style="color:#6200EE">  print</span><span style="color:#222222">(users);</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>Here, Dart infers <code>Map&lt;String, dynamic&gt;</code> for <code>json</code> and then from that infers <code>dynamic</code> for <code>users</code>. It's fine to leave <code>users</code> without a type annotation. The distinction is a little subtle. It's OK to allow inference to <em>propagate</em> <code>dynamic</code> through your code from a <code>dynamic</code> type annotation somewhere else, but you don't want it to inject a <code>dynamic</code> type annotation in a place where your code did not specify one.</p><aside class="alert alert-info"><div class="alert-header"><i class="material-symbols" aria-hidden="true">info</i> <span>Note</span></div><div class="alert-content"><p>With Dart's strong type system and type inference, users expect Dart to behave like an inferred statically-typed language. With that mental model, it is an unpleasant surprise to discover that a region of code has silently lost all of the safety and performance of static types.</p></div></aside><p><strong>Exception</strong>: Type annotations on unused parameters (<code>_</code>) can be omitted.</p><div class="header-wrapper"><h3 id="prefer-signatures-in-function-type-annotations">PREFER signatures in function type annotations</h3><a class="heading-link" href="#prefer-signatures-in-function-type-annotations" aria-label="Link to 'PREFER signatures in function type annotations' section">#</a></div><p>The identifier <code>Function</code> by itself without any return type or parameter signature refers to the special <a href="https://api.dart.dev/dart-core/Function-class.html">Function</a> type. This type is only marginally more useful than using <code>dynamic</code>. If you're going to annotate, prefer a full function type that includes the parameters and return type of the function.</p> <?code-excerpt "design_good.dart (avoid-function)" replace="/bool Function(\(.*?\))?/[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">bool</span><span style="color:#6200EE"> isValid</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> value, </span><mark class="highlight"><span style="color:#0468D7">bool</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222">)</span></mark><span style="color:#222222"> test) => ...</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (avoid-function)" replace="/Function/[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">bool</span><span style="color:#6200EE"> isValid</span><span style="color:#222222">(</span><span style="color:#0468D7">String</span><span style="color:#222222"> value, </span><mark class="highlight"><span style="color:#0468D7">Function</span></mark><span style="color:#222222"> test) => ...</span></span></code></pre></div></div><p><strong>Exception:</strong> Sometimes, you want a type that represents the union of multiple different function types. For example, you may accept a function that takes one parameter or a function that takes two. Since we don't have union types, there's no way to precisely type that and you'd normally have to use <code>dynamic</code>. <code>Function</code> is at least a little more helpful than that:</p> <?code-excerpt "design_good.dart (function-arity)" replace="/(void )?Function(\(.*?\))?/[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">void</span><span style="color:#6200EE"> handleError</span><span style="color:#222222">(</span><mark class="highlight"><span style="color:#D43324">void</span><span style="color:#0468D7"> Function</span><span style="color:#222222">()</span></mark><span style="color:#222222"> operation, </span><mark class="highlight"><span style="color:#0468D7">Function</span></mark><span style="color:#222222"> errorHandler) {</span></span>
<span class="line"><span style="color:#D43324">  try</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#6200EE">    operation</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#222222">  } </span><span style="color:#D43324">catch</span><span style="color:#222222"> (err, stack) {</span></span>
<span class="line"><span style="color:#D43324">    if</span><span style="color:#222222"> (errorHandler is </span><mark class="highlight"><span style="color:#0468D7">Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Object</span><span style="color:#222222">)</span></mark><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#6200EE">      errorHandler</span><span style="color:#222222">(err);</span></span>
<span class="line"><span style="color:#222222">    } </span><span style="color:#D43324">else</span><span style="color:#D43324"> if</span><span style="color:#222222"> (errorHandler is </span><mark class="highlight"><span style="color:#0468D7">Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Object</span><span style="color:#222222">, </span><span style="color:#0468D7">StackTrace</span><span style="color:#222222">)</span></mark><span style="color:#222222">) {</span></span>
<span class="line"><span style="color:#6200EE">      errorHandler</span><span style="color:#222222">(err, stack);</span></span>
<span class="line"><span style="color:#222222">    } </span><span style="color:#D43324">else</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">      throw</span><span style="color:#0468D7"> ArgumentError</span><span style="color:#222222">(</span><span style="color:#11796D">'errorHandler has wrong signature.'</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#222222">    }</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="dont-specify-a-return-type-for-a-setter">DON'T specify a return type for a setter</h3><a class="heading-link" href="#dont-specify-a-return-type-for-a-setter" aria-label="Link to 'DON'T specify a return type for a setter' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_return_types_on_setters.html">avoid_return_types_on_setters</a></p><p>Setters always return <code>void</code> in Dart. Writing the word is pointless.</p> <?code-excerpt "design_bad.dart (avoid_return_types_on_setters)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">void</span><span style="color:#D43324"> set</span><span style="color:#6200EE"> foo</span><span style="color:#222222">(</span><span style="color:#0468D7">Foo</span><span style="color:#222222"> value) { ... }</span></span></code></pre></div></div><?code-excerpt "design_good.dart (avoid_return_types_on_setters)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">set</span><span style="color:#6200EE"> foo</span><span style="color:#222222">(</span><span style="color:#0468D7">Foo</span><span style="color:#222222"> value) { ... }</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="dont-use-the-legacy-typedef-syntax">DON'T use the legacy typedef syntax</h3><a class="heading-link" href="#dont-use-the-legacy-typedef-syntax" aria-label="Link to 'DON'T use the legacy typedef syntax' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/prefer_generic_function_type_aliases.html">prefer_generic_function_type_aliases</a></p><p>Dart has two notations for defining a named typedef for a function type. The original syntax looks like:</p> <?code-excerpt "design_bad.dart (old-typedef)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">typedef</span><span style="color:#0468D7"> int</span><span style="color:#0468D7"> Comparison</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">>(</span><span style="color:#0468D7">T</span><span style="color:#222222"> a, </span><span style="color:#0468D7">T</span><span style="color:#222222"> b);</span></span></code></pre></div></div><p>That syntax has a couple of problems:</p><ul><li><p>There is no way to assign a name to a <em>generic</em> function type. In the above example, the typedef itself is generic. If you reference <code>Comparison</code> in your code, without a type argument, you implicitly get the function type <code>int Function(dynamic, dynamic)</code>, <em>not</em> <code>int Function&lt;T&gt;(T, T)</code>. This doesn't come up in practice often, but it matters in certain corner cases.</p></li><li><p>A single identifier in a parameter is interpreted as the parameter's <em>name</em>, not its <em>type</em>. Given:</p> <?code-excerpt "design_bad.dart (typedef-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">typedef</span><span style="color:#0468D7"> bool</span><span style="color:#0468D7"> TestNumber</span><span style="color:#222222">(</span><span style="color:#0468D7">num</span><span style="color:#222222">);</span></span></code></pre></div></div><p>Most users expect this to be a function type that takes a <code>num</code> and returns <code>bool</code>. It is actually a function type that takes <em>any</em> object (<code>dynamic</code>) and returns <code>bool</code>. The parameter's <em>name</em> (which isn't used for anything except documentation in the typedef) is &quot;num&quot;. This has been a long-standing source of errors in Dart.</p></li></ul><p>The new syntax looks like this:</p> <?code-excerpt "design_good.dart (new-typedef)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">typedef</span><span style="color:#0468D7"> Comparison</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> = </span><span style="color:#0468D7">int</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222">, </span><span style="color:#0468D7">T</span><span style="color:#222222">);</span></span></code></pre></div></div><p>If you want to include a parameter's name, you can do that too:</p> <?code-excerpt "design_good.dart (new-typedef-param-name)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">typedef</span><span style="color:#0468D7"> Comparison</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> = </span><span style="color:#0468D7">int</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222"> a, </span><span style="color:#0468D7">T</span><span style="color:#222222"> b);</span></span></code></pre></div></div><p>The new syntax can express anything the old syntax could express and more, and lacks the error-prone misfeature where a single identifier is treated as the parameter's name instead of its type. The same function type syntax after the <code>=</code> in the typedef is also allowed anywhere a type annotation may appear, giving us a single consistent way to write function types anywhere in a program.</p><p>The old typedef syntax is still supported to avoid breaking existing code, but it's deprecated.</p><div class="header-wrapper"><h3 id="prefer-inline-function-types-over-typedefs">PREFER inline function types over typedefs</h3><a class="heading-link" href="#prefer-inline-function-types-over-typedefs" aria-label="Link to 'PREFER inline function types over typedefs' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_private_typedef_functions.html">avoid_private_typedef_functions</a></p><p>In Dart, if you want to use a function type for a field, variable, or generic type argument, you can define a typedef for the function type. However, Dart supports an inline function type syntax that can be used anywhere a type annotation is allowed:</p> <?code-excerpt "design_good.dart (function-type)"  replace="/(bool|void) Function\(Event\)/[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> FilteredObservable</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> </span><mark class="highlight"><span style="color:#0468D7">bool</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Event</span><span style="color:#222222">)</span></mark><span style="color:#222222"> _predicate;</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> List</span><span style="color:#222222">&#x3C;</span><mark class="highlight"><span style="color:#D43324">void</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Event</span><span style="color:#222222">)</span></mark><span style="color:#222222">> _observers;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0468D7">  FilteredObservable</span><span style="color:#222222">(</span><span style="color:#D43324">this</span><span style="color:#222222">._predicate, </span><span style="color:#D43324">this</span><span style="color:#222222">._observers);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">  </span><mark class="highlight"><span style="color:#D43324">void</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Event</span><span style="color:#222222">)</span></mark><span style="color:#222222">? </span><span style="color:#6200EE">notify</span><span style="color:#222222">(</span><span style="color:#0468D7">Event</span><span style="color:#222222"> event) {</span></span>
<span class="line"><span style="color:#D43324">    if</span><span style="color:#222222"> (!</span><span style="color:#6200EE">_predicate</span><span style="color:#222222">(event)) </span><span style="color:#D43324">return</span><span style="color:#11796D"> null</span><span style="color:#222222">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">    </span><mark class="highlight"><span style="color:#D43324">void</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">Event</span><span style="color:#222222">)</span></mark><span style="color:#222222">? last;</span></span>
<span class="line"><span style="color:#D43324">    for</span><span style="color:#222222"> (</span><span style="color:#D43324">final</span><span style="color:#222222"> observer </span><span style="color:#D43324">in</span><span style="color:#222222"> _observers) {</span></span>
<span class="line"><span style="color:#6200EE">      observer</span><span style="color:#222222">(event);</span></span>
<span class="line"><span style="color:#222222">      last = observer;</span></span>
<span class="line"><span style="color:#222222">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D43324">    return</span><span style="color:#222222"> last;</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>It may still be worth defining a typedef if the function type is particularly long or frequently used. But in most cases, users want to see what the function type actually is right where it's used, and the function type syntax gives them that clarity.</p><div class="header-wrapper"><h3 id="prefer-using-function-type-syntax-for-parameters">PREFER using function type syntax for parameters</h3><a class="heading-link" href="#prefer-using-function-type-syntax-for-parameters" aria-label="Link to 'PREFER using function type syntax for parameters' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/use_function_type_syntax_for_parameters.html">use_function_type_syntax_for_parameters</a></p><p>Dart has a special syntax when defining a parameter whose type is a function. Sort of like in C, you surround the parameter's name with the function's return type and parameter signature:</p> <?code-excerpt "design_bad.dart (function-type-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body"><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Iterable</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> </span><span style="color:#6200EE">where</span><span style="color:#222222">(</span><span style="color:#0468D7">bool</span><span style="color:#6200EE"> predicate</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222"> element)) => ...</span></span></code></pre></div></div><p>Before Dart added function type syntax, this was the only way to give a parameter a function type without defining a typedef. Now that Dart has a general notation for function types, you can use it for function-typed parameters as well:</p> <?code-excerpt "design_good.dart (function-type-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Iterable</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> </span><span style="color:#6200EE">where</span><span style="color:#222222">(</span><span style="color:#0468D7">bool</span><span style="color:#0468D7"> Function</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222">) predicate) => ...</span></span></code></pre></div></div><p>The new syntax is a little more verbose, but is consistent with other locations where you must use the new syntax.</p><div class="header-wrapper"><h3 id="avoid-using-dynamic-unless-you-want-to-disable-static-checking">AVOID using <code>dynamic</code> unless you want to disable static checking</h3><a class="heading-link" href="#avoid-using-dynamic-unless-you-want-to-disable-static-checking" aria-label="Link to 'AVOID using dynamic unless you want to disable static checking' section">#</a></div><p>Some operations work with any possible object. For example, a <code>log()</code> method could take any object and call <code>toString()</code> on it. Two types in Dart permit all values: <code>Object?</code> and <code>dynamic</code>. However, they convey different things. If you simply want to state that you allow all objects, use <code>Object?</code>. If you want to allow all objects <em>except</em> <code>null</code>, then use <code>Object</code>.</p><p>The type <code>dynamic</code> not only accepts all objects, but it also permits all <em>operations</em>. Any member access on a value of type <code>dynamic</code> is allowed at compile time, but may fail and throw an exception at runtime. If you want exactly that risky but flexible dynamic dispatch, then <code>dynamic</code> is the right type to use.</p><p>Otherwise, prefer using <code>Object?</code> or <code>Object</code>. Rely on <code>is</code> checks and type promotion to ensure that the value's runtime type supports the member you want to access before you access it.</p> <?code-excerpt "design_good.dart (object-vs-dynamic)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#6E6E70">/// Returns a Boolean representation for </span><span style="color:#222222">[arg]</span><span style="color:#6E6E70">, which must</span></span>
<span class="line"><span style="color:#6E6E70">/// be a String or bool.</span></span>
<span class="line"><span style="color:#0468D7">bool</span><span style="color:#6200EE"> convertToBool</span><span style="color:#222222">(</span><span style="color:#0468D7">Object</span><span style="color:#222222"> arg) {</span></span>
<span class="line"><span style="color:#D43324">  if</span><span style="color:#222222"> (arg is </span><span style="color:#0468D7">bool</span><span style="color:#222222">) </span><span style="color:#D43324">return</span><span style="color:#222222"> arg;</span></span>
<span class="line"><span style="color:#D43324">  if</span><span style="color:#222222"> (arg is </span><span style="color:#0468D7">String</span><span style="color:#222222">) </span><span style="color:#D43324">return</span><span style="color:#222222"> arg.</span><span style="color:#6200EE">toLowerCase</span><span style="color:#222222">() == </span><span style="color:#11796D">'true'</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  throw</span><span style="color:#0468D7"> ArgumentError</span><span style="color:#222222">(</span><span style="color:#11796D">'Cannot convert </span><span style="color:#11796D">$</span><span style="color:#222222">arg</span><span style="color:#11796D"> to a bool.'</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>The main exception to this rule is when working with existing APIs that use <code>dynamic</code>, especially inside a generic type. For example, JSON objects have type <code>Map&lt;String, dynamic&gt;</code> and your code will need to accept that same type. Even so, when using a value from one of these APIs, it's often a good idea to cast it to a more precise type before accessing members.</p><div class="header-wrapper"><h3 id="do-use-futurevoid-as-the-return-type-of-asynchronous-members-that-do-not-produce-values">DO use <code>Future&lt;void&gt;</code> as the return type of asynchronous members that do not produce values</h3><a class="heading-link" href="#do-use-futurevoid-as-the-return-type-of-asynchronous-members-that-do-not-produce-values" aria-label="Link to 'DO use Future&lt;void&gt; as the return type of asynchronous members that do not produce values' section">#</a></div><p>When you have a synchronous function that doesn't return a value, you use <code>void</code> as the return type. The asynchronous equivalent for a method that doesn't produce a value, but that the caller might need to await, is <code>Future&lt;void&gt;</code>.</p><p>You may see code that uses <code>Future</code> or <code>Future&lt;Null&gt;</code> instead because older versions of Dart didn't allow <code>void</code> as a type argument. Now that it does, you should use it. Doing so more directly matches how you'd type a similar synchronous function, and gives you better error-checking for callers and in the body of the function.</p><p>For asynchronous functions that do not return a useful value and where no callers need to await the asynchronous work or handle an asynchronous failure, use a return type of <code>void</code>.</p><div class="header-wrapper"><h3 id="avoid-using-futureort-as-a-return-type">AVOID using <code>FutureOr&lt;T&gt;</code> as a return type</h3><a class="heading-link" href="#avoid-using-futureort-as-a-return-type" aria-label="Link to 'AVOID using FutureOr&lt;T&gt; as a return type' section">#</a></div><p>If a method accepts a <code>FutureOr&lt;int&gt;</code>, it is <a href="https://en.wikipedia.org/wiki/Robustness_principle">generous in what it accepts</a>. Users can call the method with either an <code>int</code> or a <code>Future&lt;int&gt;</code>, so they don't need to wrap an <code>int</code> in <code>Future</code> that you are going to unwrap anyway.</p><p>If you <em>return</em> a <code>FutureOr&lt;int&gt;</code>, users need to check whether get back an <code>int</code> or a <code>Future&lt;int&gt;</code> before they can do anything useful. (Or they'll just <code>await</code> the value, effectively always treating it as a <code>Future</code>.) Just return a <code>Future&lt;int&gt;</code>, it's cleaner. It's easier for users to understand that a function is either always asynchronous or always synchronous, but a function that can be either is hard to use correctly.</p> <?code-excerpt "design_good.dart (future-or)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Future</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> </span><span style="color:#6200EE">triple</span><span style="color:#222222">(</span><span style="color:#0468D7">FutureOr</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> value) </span><span style="color:#D43324">async</span><span style="color:#222222"> => (</span><span style="color:#D43324">await</span><span style="color:#222222"> value) * </span><span style="color:#11796D">3</span><span style="color:#222222">;</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (future-or)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">FutureOr</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> </span><span style="color:#6200EE">triple</span><span style="color:#222222">(</span><span style="color:#0468D7">FutureOr</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> value) {</span></span>
<span class="line"><span style="color:#D43324">  if</span><span style="color:#222222"> (value is </span><span style="color:#0468D7">int</span><span style="color:#222222">) </span><span style="color:#D43324">return</span><span style="color:#222222"> value * </span><span style="color:#11796D">3</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#D43324">  return</span><span style="color:#222222"> value.</span><span style="color:#6200EE">then</span><span style="color:#222222">((v) => v * </span><span style="color:#11796D">3</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><p>The more precise formulation of this guideline is to <em>only use <code>FutureOr&lt;T&gt;</code> in <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">contravariant</a> positions.</em> Parameters are contravariant and return types are covariant. In nested function types, this gets flippedif you have a parameter whose type is itself a function, then the callback's return type is now in contravariant position and the callback's parameters are covariant. This means it's OK for a <em>callback's</em> type to return <code>FutureOr&lt;T&gt;</code>:</p> <?code-excerpt "design_good.dart (future-or-contra)" replace="/FutureOr.S./[!$&!]/g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Stream</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">S</span><span style="color:#222222">> </span><span style="color:#6200EE">asyncMap</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">, </span><span style="color:#0468D7">S</span><span style="color:#222222">>(</span></span>
<span class="line"><span style="color:#0468D7">    Iterable</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">T</span><span style="color:#222222">> iterable, </span><mark class="highlight"><span style="color:#0468D7">FutureOr</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">S</span><span style="color:#222222">></span></mark><span style="color:#222222"> </span><span style="color:#0468D7">Function</span><span style="color:#222222">(</span><span style="color:#0468D7">T</span><span style="color:#222222">) callback) </span><span style="color:#D43324">async</span><span style="color:#222222">* {</span></span>
<span class="line"><span style="color:#D43324">  for</span><span style="color:#222222"> (</span><span style="color:#D43324">final</span><span style="color:#222222"> element </span><span style="color:#D43324">in</span><span style="color:#222222"> iterable) {</span></span>
<span class="line"><span style="color:#D43324">    yield</span><span style="color:#D43324"> await</span><span style="color:#6200EE"> callback</span><span style="color:#222222">(element);</span></span>
<span class="line"><span style="color:#222222">  }</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><div class="header-wrapper"><h2 id="parameters">Parameters</h2><a class="heading-link" href="#parameters" aria-label="Link to 'Parameters' section">#</a></div><p>In Dart, optional parameters can be either positional or named, but not both.</p><div class="header-wrapper"><h3 id="avoid-positional-boolean-parameters">AVOID positional boolean parameters</h3><a class="heading-link" href="#avoid-positional-boolean-parameters" aria-label="Link to 'AVOID positional boolean parameters' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_positional_boolean_parameters.html">avoid_positional_boolean_parameters</a></p><p>Unlike other types, booleans are usually used in literal form. Values like numbers are usually wrapped in named constants, but we typically pass around <code>true</code> and <code>false</code> directly. That can make call sites unreadable if it isn't clear what the boolean represents:</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">new</span><span style="color:#0468D7"> Task</span><span style="color:#222222">(</span><span style="color:#11796D">true</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">new</span><span style="color:#0468D7"> Task</span><span style="color:#222222">(</span><span style="color:#11796D">false</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">new</span><span style="color:#0468D7"> ListBox</span><span style="color:#222222">(</span><span style="color:#11796D">false</span><span style="color:#222222">, </span><span style="color:#11796D">true</span><span style="color:#222222">, </span><span style="color:#11796D">true</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#D43324">new</span><span style="color:#0468D7"> Button</span><span style="color:#222222">(</span><span style="color:#11796D">false</span><span style="color:#222222">);</span></span></code></pre></div></div><p>Instead, prefer using named arguments, named constructors, or named constants to clarify what the call is doing.</p> <?code-excerpt "design_good.dart (avoid-positional-bool-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">Task</span><span style="color:#222222">.</span><span style="color:#6200EE">oneShot</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#0468D7">Task</span><span style="color:#222222">.</span><span style="color:#6200EE">repeating</span><span style="color:#222222">();</span></span>
<span class="line"><span style="color:#0468D7">ListBox</span><span style="color:#222222">(scroll: </span><span style="color:#11796D">true</span><span style="color:#222222">, showScrollbars: </span><span style="color:#11796D">true</span><span style="color:#222222">);</span></span>
<span class="line"><span style="color:#0468D7">Button</span><span style="color:#222222">(</span><span style="color:#0468D7">ButtonState</span><span style="color:#222222">.enabled);</span></span></code></pre></div></div><p>Note that this doesn't apply to setters, where the name makes it clear what the value represents:</p><div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">listBox.canScroll = </span><span style="color:#11796D">true</span><span style="color:#222222">;</span></span>
<span class="line"><span style="color:#222222">button.isEnabled = </span><span style="color:#11796D">false</span><span style="color:#222222">;</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="avoid-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters">AVOID optional positional parameters if the user may want to omit earlier parameters</h3><a class="heading-link" href="#avoid-optional-positional-parameters-if-the-user-may-want-to-omit-earlier-parameters" aria-label="Link to 'AVOID optional positional parameters if the user may want to omit earlier parameters' section">#</a></div><p>Optional positional parameters should have a logical progression such that earlier parameters are passed more often than later ones. Users should almost never need to explicitly pass a &quot;hole&quot; to omit an earlier positional argument to pass later one. You're better off using named arguments for that.</p> <?code-excerpt "design_good.dart (omit-optional-positional)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#0468D7">String</span><span style="color:#222222">.</span><span style="color:#6200EE">fromCharCodes</span><span style="color:#222222">(</span><span style="color:#0468D7">Iterable</span><span style="color:#222222">&#x3C;</span><span style="color:#0468D7">int</span><span style="color:#222222">> charCodes, [</span><span style="color:#0468D7">int</span><span style="color:#222222"> start = </span><span style="color:#11796D">0</span><span style="color:#222222">, </span><span style="color:#0468D7">int</span><span style="color:#222222">? end]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0468D7">DateTime</span><span style="color:#222222">(</span><span style="color:#0468D7">int</span><span style="color:#222222"> year,</span></span>
<span class="line"><span style="color:#222222">    [</span><span style="color:#0468D7">int</span><span style="color:#222222"> month = </span><span style="color:#11796D">1</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> day = </span><span style="color:#11796D">1</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> hour = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> minute = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> second = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> millisecond = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> microsecond = </span><span style="color:#11796D">0</span><span style="color:#222222">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0468D7">Duration</span><span style="color:#222222">(</span></span>
<span class="line"><span style="color:#222222">    {</span><span style="color:#0468D7">int</span><span style="color:#222222"> days = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> hours = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> minutes = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> seconds = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> milliseconds = </span><span style="color:#11796D">0</span><span style="color:#222222">,</span></span>
<span class="line"><span style="color:#0468D7">    int</span><span style="color:#222222"> microseconds = </span><span style="color:#11796D">0</span><span style="color:#222222">});</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="avoid-mandatory-parameters-that-accept-a-special-no-argument-value">AVOID mandatory parameters that accept a special &quot;no argument&quot; value</h3><a class="heading-link" href="#avoid-mandatory-parameters-that-accept-a-special-no-argument-value" aria-label="Link to 'AVOID mandatory parameters that accept a special &quot;no argument&quot; value' section">#</a></div><p>If the user is logically omitting a parameter, prefer letting them actually omit it by making the parameter optional instead of forcing them to pass <code>null</code>, an empty string, or some other special value that means &quot;did not pass&quot;.</p><p>Omitting the parameter is more terse and helps prevent bugs where a sentinel value like <code>null</code> is accidentally passed when the user thought they were providing a real value.</p> <?code-excerpt "design_good.dart (avoid-mandatory-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> rest = string.</span><span style="color:#6200EE">substring</span><span style="color:#222222">(start);</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (avoid-mandatory-param)"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">var</span><span style="color:#222222"> rest = string.</span><span style="color:#6200EE">substring</span><span style="color:#222222">(start, </span><span style="color:#11796D">null</span><span style="color:#222222">);</span></span></code></pre></div></div><div class="header-wrapper"><h3 id="do-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range">DO use inclusive start and exclusive end parameters to accept a range</h3><a class="heading-link" href="#do-use-inclusive-start-and-exclusive-end-parameters-to-accept-a-range" aria-label="Link to 'DO use inclusive start and exclusive end parameters to accept a range' section">#</a></div><p>If you are defining a method or function that lets a user select a range of elements or items from some integer-indexed sequence, take a start index, which refers to the first item and a (likely optional) end index which is one greater than the index of the last item.</p><p>This is consistent with core libraries that do the same thing.</p> <?code-excerpt "../../test/effective_dart_test.dart (param-range)" replace="/expect\(//g; /, \/\*\*\// \/\//g; /\);//g"?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#222222">[</span><span style="color:#11796D">0</span><span style="color:#222222">, </span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">2</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">].</span><span style="color:#6200EE">sublist</span><span style="color:#222222">(</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">) </span><span style="color:#6E6E70">// [1, 2]</span></span>
<span class="line"><span style="color:#11796D">'abcd'</span><span style="color:#222222">.</span><span style="color:#6200EE">substring</span><span style="color:#222222">(</span><span style="color:#11796D">1</span><span style="color:#222222">, </span><span style="color:#11796D">3</span><span style="color:#222222">) </span><span style="color:#6E6E70">// 'bc'</span></span></code></pre></div></div><p>It's particularly important to be consistent here because these parameters are usually unnamed. If your API takes a length instead of an end point, the difference won't be visible at all at the call site.</p><div class="header-wrapper"><h2 id="equality">Equality</h2><a class="heading-link" href="#equality" aria-label="Link to 'Equality' section">#</a></div><p>Implementing custom equality behavior for a class can be tricky. Users have deep intuition about how equality works that your objects need to match, and collection types like hash tables have subtle contracts that they expect elements to follow.</p><div class="header-wrapper"><h3 id="do-override-hashcode-if-you-override">DO override <code>hashCode</code> if you override <code>==</code></h3><a class="heading-link" href="#do-override-hashcode-if-you-override" aria-label="Link to 'DO override hashCode if you override ==' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/hash_and_equals.html">hash_and_equals</a></p><p>The default hash code implementation provides an <em>identity</em> hashtwo objects generally only have the same hash code if they are the exact same object. Likewise, the default behavior for <code>==</code> is identity.</p><p>If you are overriding <code>==</code>, it implies you may have different objects that are considered &quot;equal&quot; by your class. <strong>Any two objects that are equal must have the same hash code.</strong> Otherwise, maps and other hash-based collections will fail to recognize that the two objects are equivalent.</p><div class="header-wrapper"><h3 id="do-make-your-operator-obey-the-mathematical-rules-of-equality">DO make your <code>==</code> operator obey the mathematical rules of equality</h3><a class="heading-link" href="#do-make-your-operator-obey-the-mathematical-rules-of-equality" aria-label="Link to 'DO make your == operator obey the mathematical rules of equality' section">#</a></div><p>An equivalence relation should be:</p><ul><li><p><strong>Reflexive</strong>: <code>a == a</code> should always return <code>true</code>.</p></li><li><p><strong>Symmetric</strong>: <code>a == b</code> should return the same thing as <code>b == a</code>.</p></li><li><p><strong>Transitive</strong>: If <code>a == b</code> and <code>b == c</code> both return <code>true</code>, then <code>a == c</code> should too.</p></li></ul><p>Users and code that uses <code>==</code> expect all of these laws to be followed. If your class can't obey these rules, then <code>==</code> isn't the right name for the operation you're trying to express.</p><div class="header-wrapper"><h3 id="avoid-defining-custom-equality-for-mutable-classes">AVOID defining custom equality for mutable classes</h3><a class="heading-link" href="#avoid-defining-custom-equality-for-mutable-classes" aria-label="Link to 'AVOID defining custom equality for mutable classes' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_equals_and_hash_code_on_mutable_classes.html">avoid_equals_and_hash_code_on_mutable_classes</a></p><p>When you define <code>==</code>, you also have to define <code>hashCode</code>. Both of those should take into account the object's fields. If those fields <em>change</em> then that implies the object's hash code can change.</p><p>Most hash-based collections don't anticipate thatthey assume an object's hash code will be the same forever and may behave unpredictably if that isn't true.</p><div class="header-wrapper"><h3 id="dont-make-the-parameter-to-nullable">DON'T make the parameter to <code>==</code> nullable</h3><a class="heading-link" href="#dont-make-the-parameter-to-nullable" aria-label="Link to 'DON'T make the parameter to == nullable' section">#</a></div><p class="linter-rule">Linter rule: <a href="../tools/linter-rules/avoid_null_checks_in_equality_operators.html">avoid_null_checks_in_equality_operators</a></p><p>The language specifies that <code>null</code> is equal only to itself, and that the <code>==</code> method is called only if the right-hand side is not <code>null</code>.</p> <?code-excerpt "design_good.dart (eq-dont-check-for-null)" plaster="// "?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-good"><span class="code-block-tag">good</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Person</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> String</span><span style="color:#222222"> name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">  // </span></span>
<span class="line"></span>
<span class="line"><span style="color:#0468D7">  bool</span><span style="color:#D43324"> operator</span><span style="color:#222222"> ==(</span><span style="color:#0468D7">Object</span><span style="color:#222222"> other) => other is </span><span style="color:#0468D7">Person</span><span style="color:#222222"> &#x26;&#x26; name == other.name;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><?code-excerpt "design_bad.dart (eq-dont-check-for-null)" replace="/Object\?/[!$&!]/g" plaster="// "?> <div class="code-block-wrapper language-dart"><div class="code-block-body has-tag tag-bad"><span class="code-block-tag">bad</span><span class="code-block-language" title="Language dart">dart</span><pre class="shiki dash-light" tabindex="0"><code><span class="line"><span style="color:#D43324">class</span><span style="color:#0468D7"> Person</span><span style="color:#222222"> {</span></span>
<span class="line"><span style="color:#D43324">  final</span><span style="color:#0468D7"> String</span><span style="color:#222222"> name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E6E70">  // </span></span>
<span class="line"></span>
<span class="line"><span style="color:#0468D7">  bool</span><span style="color:#D43324"> operator</span><span style="color:#222222"> ==(</span><mark class="highlight"><span style="color:#0468D7">Object</span><span style="color:#222222">?</span></mark><span style="color:#222222"> other) =></span></span>
<span class="line"><span style="color:#222222">      other != </span><span style="color:#11796D">null</span><span style="color:#222222"> &#x26;&#x26; other is </span><span style="color:#0468D7">Person</span><span style="color:#222222"> &#x26;&#x26; name == other.name;</span></span>
<span class="line"><span style="color:#222222">}</span></span></code></pre></div></div><nav id="subnav"><ul><li class="previous"><a href="usage.html">&lang;&nbsp;&nbsp;Usage</a></li><li class="next"></li></ul></nav><p id="page-github-links"><span>Unless stated otherwise, the documentation on this site reflects Dart 3.6.0. Page last updated on 2024-12-10.</span> <a href="https://github.com/dart-lang/site-www/tree/main/src/content/effective-dart/design.md" target="_blank" rel="noopener">View source</a> <span>or </span><a href="https://github.com/dart-lang/site-www/issues/new?template=1_page_issue.yml&amp;page-url=https://dart.dev/effective-dart/design/&amp;page-source=https://github.com/dart-lang/site-www/tree/main/src/content/effective-dart/design.md" title="Report an issue with this page" target="_blank" rel="noopener">report an issue</a>.</p></div></article></main><footer id="page-footer"><div class="footer-section footer-main"><a href="../index.html" class="brand" title="Dart"><img src="../assets/img/logo/logo-white-text.svg" alt="Dart" width="164"></a><div class="footer-social-links"><a href="https://medium.com/dartlang" target="_blank" rel="noopener" title="Medium blog"><svg><use href="../assets/img/social/medium.svg#medium"></use></svg> </a><a href="https://github.com/dart-lang" target="_blank" rel="noopener" title="GitHub"><svg><use href="../assets/img/social/github.svg#github"></use></svg> </a><a href="https://twitter.com/dart_lang" target="_blank" rel="noopener" title="X (Twitter)"><svg><use href="../assets/img/social/x.svg#x"></use></svg></a></div></div><div class="footer-section footer-tray"><div class="footer-licenses">Except as otherwise noted, this site is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, and code samples are licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause">3-Clause BSD License</a>.</div><div class="footer-utility-links"><ul><li><a href="../terms.html" title="Terms of use">Terms</a></li><li><a href="https://policies.google.com/privacy" target="_blank" rel="noopener" title="Privacy policy">Privacy</a></li><li><a href="../security.html" title="Security philosophy and practices">Security</a></li></ul></div></div></footer></body>
<!-- Mirrored from dart.dev/effective-dart/design by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Dec 2024 22:14:47 GMT -->
</html>